<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Thanox（情景模式） | 冰梦博客的备份</title><meta name="author" content="备份:bzmshang.top"><meta name="copyright" content="备份:bzmshang.top"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="情景模式版本123456ver&#x3D;v0.3.0latest-update&#x3D;2023.11.11以下内容全文为Thanox的情景模式收集，请告诉给有需要的人  声明  下面所有的情景模式皆为 JSON 格式 全局变量操作方式 在情景模式中，点开右上角三个点 找到全局变量并点开后，点击右下角的添加 先在顶部输入框中输入全局变量名，然后点开右上角三个点 选取应用完成后，点击右下角的完成，再点击右下角的保存">
<meta property="og:type" content="article">
<meta property="og:title" content="Thanox（情景模式）">
<meta property="og:url" content="https://blog.bzmshang.top/Thanox_SceneModel.html">
<meta property="og:site_name" content="冰梦博客的备份">
<meta property="og:description" content="情景模式版本123456ver&#x3D;v0.3.0latest-update&#x3D;2023.11.11以下内容全文为Thanox的情景模式收集，请告诉给有需要的人  声明  下面所有的情景模式皆为 JSON 格式 全局变量操作方式 在情景模式中，点开右上角三个点 找到全局变量并点开后，点击右下角的添加 先在顶部输入框中输入全局变量名，然后点开右上角三个点 选取应用完成后，点击右下角的完成，再点击右下角的保存">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png">
<meta property="article:published_time" content="2022-09-09T16:00:00.000Z">
<meta property="article:modified_time" content="2024-01-23T01:14:02.130Z">
<meta property="article:author" content="备份:bzmshang.top">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://blog.bzmshang.top/Thanox_SceneModel.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Thanox（情景模式）',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-01-23 09:14:02'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.1.1"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">11</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr class="custom-hr"/></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="冰梦博客的备份"><span class="site-name">冰梦博客的备份</span></a></span><div id="menus"><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Thanox（情景模式）</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-09-09T16:00:00.000Z" title="发表于 2022-09-10 00:00:00">2022-09-10</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-23T01:14:02.130Z" title="更新于 2024-01-23 09:14:02">2024-01-23</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Thanox（情景模式）"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="情景模式版本"><a href="#情景模式版本" class="headerlink" title="情景模式版本"></a><i id="情景模式版本"></i>情景模式版本</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ver=v0.3.0</span><br><span class="line"></span><br><span class="line">latest-update=2023.11.11</span><br><span class="line"></span><br><span class="line">以下内容全文为Thanox的情景模式收集，请告诉给有需要的人</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a><i id="声明"></i>声明</h2><blockquote>
<ol>
<li>下面所有的情景模式皆为 JSON 格式</li>
<li>全局变量操作方式<ol>
<li>在情景模式中，点开右上角三个点</li>
<li>找到全局变量并点开后，点击右下角的添加</li>
<li>先在顶部输入框中输入全局变量名，然后点开右上角三个点</li>
<li>选取应用完成后，点击右下角的完成，再点击右下角的保存，即可</li>
</ol>
</li>
<li>SU操作方式<ol>
<li>在情景模式中，点开右上角三个点</li>
<li>找到引擎并点开，打开su API的开关后</li>
<li>给予Thanox自启动权限，即可</li>
</ol>
</li>
<li>如果发现有失效的情景模式，也请酷安反馈下</li>
</ol>
<ul>
<li>更多：(加群，教程，文件)<ul>
<li>手机版：请点击左上角三条杠查看更多</li>
<li>电脑版：请看顶部导航栏</li>
</ul>
</li>
</ul>
</blockquote>
<h1 id="实用情景模式"><a href="#实用情景模式" class="headerlink" title="实用情景模式"></a><i id="实用情景模式"></i>实用情景模式</h1><h2 id="1-清理后台"><a href="#1-清理后台" class="headerlink" title="1. 清理后台"></a><i id="1"></i>1. 清理后台</h2><h3 id="1-1-划卡即清"><a href="#1-1-划卡即清" class="headerlink" title="1.1 划卡即清"></a><i id="1-1"></i>1.1 划卡即清</h3><ul>
<li>注意事项<blockquote>
<ol>
<li>非常适用于Color系统移除Athena（雅典娜）后，划卡无法清理后台</li>
<li>全局变量为：HUAKA（将所有APP都加入全局变量即可）</li>
</ol>
</blockquote>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">    &quot;name&quot;: &quot;划卡即清&quot;,</span><br><span class="line">    &quot;description&quot;: &quot;划掉任务卡片直接杀死后台，全局变量HUAKA&quot;,</span><br><span class="line">    &quot;priority&quot;: 1,</span><br><span class="line">    &quot;condition&quot;: &quot;taskRemoved == true &amp;&amp; globalVarOf$HUAKA.contains(pkgName) &quot;,</span><br><span class="line">    &quot;actions&quot;: [</span><br><span class="line">    &quot;killer.killPackage(pkgName);&quot;</span><br><span class="line">            ]</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="1-2-自动划掉最近任务中没有运行的应用"><a href="#1-2-自动划掉最近任务中没有运行的应用" class="headerlink" title="1.2 自动划掉最近任务中没有运行的应用"></a><i id="1-2"></i>1.2 自动划掉最近任务中没有运行的应用</h3><ul>
<li>注意事项<blockquote>
<ol>
<li>即食即用</li>
</ol>
</blockquote>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;自动划卡&quot;,</span><br><span class="line">&quot;description&quot;: &quot;自动划掉最近任务中没有运行的应用&quot;,</span><br><span class="line">&quot;priority&quot;: 1,</span><br><span class="line">&quot;condition&quot;: &quot;pkgKilled == true&quot;,</span><br><span class="line">&quot;delay&quot;: 2000,</span><br><span class="line">&quot;actions&quot;: [ </span><br><span class="line">&quot;if(thanos.activityManager.isPackageRunning(pkgName) == false &amp;&amp; task.hasTaskFromPackage(pkgName) == true)&#123;task.removeTasksForPackage(pkgName) ;&#125;&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="1-3-返回桌面移除任务卡片"><a href="#1-3-返回桌面移除任务卡片" class="headerlink" title="1.3 返回桌面移除任务卡片"></a><i id="1-3"></i>1.3 返回桌面移除任务卡片</h3><ul>
<li><u><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/45419920?shareKey=NmEzNjg2ODU1Y2YxNjQ0NGU5MDc~&shareUid=3571197&shareFrom" title="**`原帖`**"><strong><code>原帖</code></strong></a></u></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;返回桌面移除任务卡片&quot;,</span><br><span class="line">&quot;description&quot;: &quot;返回桌面(变量HomeApp)移除全局变量Task列表中的应用任务卡片&quot;,</span><br><span class="line">&quot;priority&quot;: 1,</span><br><span class="line">&quot;condition&quot;: &quot; frontPkgChanged == true &amp;&amp; globalVarOf$HomeApp.contains(to) &amp;&amp; globalVarOf$Task.contains(from) &amp;&amp; task.hasTaskFromPackage(from)&quot;,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot;task.removeTasksForPackage(from)&quot;,</span><br><span class="line">&quot;ui.showShortToast(\&quot;🌪️移除\&quot; + thanos.pkgManager.getAppInfo(from).appLabel +\&quot;任务🌪️\&quot;)&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">] </span><br></pre></td></tr></table></figure>

<h3 id="1-4-息屏关数据，清理后台"><a href="#1-4-息屏关数据，清理后台" class="headerlink" title="1.4 息屏关数据，清理后台"></a><i id="1-4"></i>1.4 息屏关数据，清理后台</h3><ul>
<li><u><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/35805896?shareKey=MGU1YjZlMjcwZThlNjQ0ODhjZTI~&shareUid=2521387&shareFrom" title="**`原帖`**"><strong><code>原帖</code></strong></a></u></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;息屏关数据，清理后台&quot;,</span><br><span class="line">&quot;description&quot;: &quot;息屏5分钟后再判断是否息屏，若息屏则关数据，清理后台，300000毫秒=300秒=5分钟，可自行修改，酷安@梦霓华裳 &quot;,</span><br><span class="line">&quot;priority&quot;: 1,</span><br><span class="line">&quot;condition&quot;: &quot;screenOff == true&quot;,</span><br><span class="line">&quot;delay&quot;: 300000,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot;if(screenOn == false)&#123;data.setDataEnabled(false)&#125;&quot;,</span><br><span class="line">&quot;if(screenOn == false)&#123;clearBackgroundTasks()&#125;&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="1-5-返回桌面或灭屏清理后台"><a href="#1-5-返回桌面或灭屏清理后台" class="headerlink" title="1.5 返回桌面或灭屏清理后台"></a><i id="1-5"></i>1.5 返回桌面或灭屏清理后台</h3><ul>
<li>NoActive群友提供</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;返回桌面或灭屏清理后台&quot;,</span><br><span class="line">&quot;description&quot;: &quot;返回桌面或灭屏清理全局变量BKILL列表中的应用&quot;,</span><br><span class="line">&quot;priority&quot;: 2,</span><br><span class="line">&quot;condition&quot;: &quot;frontPkgChanged == true &amp;&amp; to == \&quot;com.miui.home\&quot; || screenOff == true&quot;,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot;for (String s : globalVarOf$BKILL)&#123;if( task.hasTaskFromPackage(s))&#123;ui.showShortToast(\&quot;关闭\&quot; +s);killer.killPackage(s);ui.showShortToast(\&quot;移除\&quot; +s);task.removeTasksForPackage(s)&#125;&#125;;&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="1-6-5分钟未前台自动杀后台"><a href="#1-6-5分钟未前台自动杀后台" class="headerlink" title="1.6 5分钟未前台自动杀后台"></a><i id="1-6"></i>1.6 5分钟未前台自动杀后台</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;5分钟未前台自动杀后台&quot;,</span><br><span class="line">&quot;description&quot;: &quot;挂后台杀应用，应用名单来自全局变BackStill，5分钟之后杀死&quot;,</span><br><span class="line">&quot;priority&quot;: 1,</span><br><span class="line">&quot;condition&quot;: &quot;frontPkgChanged == true &amp;&amp; globalVarOf$BackStill.contains(from) &quot;,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot;Thread.currentThread().sleep(300000);&quot;,</span><br><span class="line">&quot;if(activity.getFrontAppPackage() != from)[ui.showShortToast(\&quot;杀后台\&quot;+from)];&quot;,</span><br><span class="line">&quot;if(activity.getFrontAppPackage() != from)[killer.killPackage(from)];&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="1-7-移除通知杀后台"><a href="#1-7-移除通知杀后台" class="headerlink" title="1.7 移除通知杀后台"></a><i id="1-7"></i>1.7 移除通知杀后台</h3><ul>
<li><u><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/22576717?shareKey=ZjgwNzRhYjg4ODgxNjQ0MjJiMDE~&shareUid=3571197&shareFrom" title="**`原帖`**"><strong><code>原帖</code></strong></a></u></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;移除通知杀后台&quot;,</span><br><span class="line">&quot;description&quot;: &quot;移除通知杀应用，应用名单来自全局变量notikill。酷安@幻觉&quot;,</span><br><span class="line">&quot;priority&quot;: 1,</span><br><span class="line">&quot;condition&quot;: &quot;notificationRemoved == true &amp;&amp; globalVarOf$notikill.contains(pkgName)&quot;,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot;killer.killPackage(pkgName);&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="1-8-移除通知杀后台优化版"><a href="#1-8-移除通知杀后台优化版" class="headerlink" title="1.8 移除通知杀后台优化版"></a><i id="1-8"></i>1.8 移除通知杀后台优化版</h3><ul>
<li>作者：<u><a target="_blank" rel="noopener" href="http://www.coolapk.com/u/20080849" title="苹果技术开发人员"><strong><code>苹果技术开发人员</code></strong></a></u></li>
<li>优化：前台应用推送消息时清除通知不杀应用</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;移除通知杀后台&quot;,</span><br><span class="line">&quot;description&quot;: &quot;移除通知杀应用，应用名单来自全局变量notikill,前台应用推送消息时清除通知不杀应用。酷安@幻觉&quot;,</span><br><span class="line">&quot;priority&quot;: 1,</span><br><span class="line">&quot;condition&quot;: &quot;notificationRemoved == true &amp;&amp; globalVarOf$notikill.contains(pkgName) &amp;&amp; activity.getFrontAppPackage()!=pkgName&quot;,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot;killer.killPackage(pkgName);&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="1-9-应用被杀死，则移除卡片"><a href="#1-9-应用被杀死，则移除卡片" class="headerlink" title="1.9 应用被杀死，则移除卡片"></a><i id="1-9"></i>1.9 应用被杀死，则移除卡片</h3><ul>
<li><u><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/39045897?shareKey=NzQ1YTJkMWQwZTk2NjRjNjNjZTM~&shareUid=3119350&shareFrom" title="**`原帖`**"><strong><code>原帖</code></strong></a></u></li>
<li>应用被后台杀死，记录被杀死的应用和被杀死的时间到日志文件里。该情景模式不记录你自己划走卡片杀死的应用，只记录在最近任务里被后台杀死的应用。如何查看？日志文件路径”&#x2F;data&#x2F;system&#x2F;thanos_ynokiMHEVHZWWdDH&#x2F;profile_user_io&#x2F;kill&#x2F;killLog.txt”，打开日志文件即可查看。代码如下，请用情景模式json编写。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;应用被杀死，则移除卡片&quot;,</span><br><span class="line">&quot;description&quot;: &quot;应用被后台杀死时，移除卡片，历史写入日志&quot;,</span><br><span class="line">&quot;priority&quot;: 1,</span><br><span class="line">&quot;condition&quot;: &quot;pkgKilled == true &amp;&amp; globalVarOf$s_app.contains(pkgName) &amp;&amp; task.hasTaskFromPackage(pkgName)&quot;,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot;task.removeTasksForPackage(pkgName);&quot;,</span><br><span class="line">&quot;io.writeAppend(\&quot;kill/killLog.txt\&quot;,pkgName+\&quot;应用被后台杀死，移除卡片，移除时间:\&quot;+ new java.util.Date() +\&quot;\\r\&quot;)&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="1-10-开机工作"><a href="#1-10-开机工作" class="headerlink" title="1.10 开机工作"></a><i id="1-10"></i>1.10 开机工作</h3><ul>
<li><u><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/39045897?shareKey=NzQ1YTJkMWQwZTk2NjRjNjNjZTM~&shareUid=3119350&shareFrom" title="**`原帖`**"><strong><code>原帖</code></strong></a></u></li>
<li>开机划掉没有运行的卡片，并且删除旧日志，同时后台开启一些需要自启动的应用。使用方法，全局变量: all_app 是开机后需要在最近任务划掉的应用集; ziqidong 是开机需要后台启动的应用集。代码如下:</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;开机工作&quot;,</span><br><span class="line">&quot;description&quot;: &quot;开机自启动一些程序，来自变量名ziqidong，划掉除去变量all_app的卡片，此变量除去了微信，删除一些日志&quot;,</span><br><span class="line">&quot;priority&quot;: 3,</span><br><span class="line">&quot;condition&quot;: &quot;systemReady == true&quot;,</span><br><span class="line">&quot;delay&quot;: 1000,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot;foreach (pkn : globalVarOf$all_app)&#123;task.removeTasksForPackage(pkn);&#125;&quot;,</span><br><span class="line">&quot;ui.showShortToast(\&quot;清理卡片完成\&quot;)&quot;,</span><br><span class="line">&quot;foreach (zq : globalVarOf$ziqidong)&#123;activity.launchProcessForPackage(zq)&#125;&quot;,</span><br><span class="line">&quot;ui.showShortToast(\&quot;自启动应用完成\&quot;)&quot;,</span><br><span class="line">&quot;io.write(\&quot;kill/killLog.txt\&quot;, \&quot;本次启动时间:\&quot; + new java.util.Date() + \&quot;\\r\&quot;)&quot;,</span><br><span class="line">&quot;ui.showShortToast(\&quot;重置日志完成\&quot;)&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="1-11-游戏时清理部分后台"><a href="#1-11-游戏时清理部分后台" class="headerlink" title="1.11 游戏时清理部分后台"></a><i id="1-11"></i>1.11 游戏时清理部分后台</h3><ul>
<li><u><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/39045897?shareKey=NzQ1YTJkMWQwZTk2NjRjNjNjZTM~&shareUid=3119350&shareFrom" title="**`原帖`**"><strong><code>原帖</code></strong></a></u></li>
<li>游戏时清理一些顽固后台，变量notNitian_apps放需要被杀的应用，注意该应用如果在最近任务，将不会被杀。变量qlapps是你要打开的游戏应用或其他应用。代码如下:</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;游戏时清理部分后台&quot;,</span><br><span class="line">&quot;description&quot;: &quot;游戏时清理部分不在卡片的后台&quot;,</span><br><span class="line">&quot;priority&quot;: 2,</span><br><span class="line">&quot;condition&quot;: &quot;frontPkgChanged=true &amp;&amp; globalVarOf$qlapps.contains(to)&quot;,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot;ui.showShortToast(\&quot;清理一些后台中\&quot;);&quot;,</span><br><span class="line">&quot;foreach (pkn : globalVarOf$notNitian_apps) &#123;if (su.exe(&#x27;pidof &#x27; + pkn).out != [] &amp;&amp; ! task.hasTaskFromPackage(pkn)) &#123;su.exe(\&quot;kill -15 $(ps -ATf | grep \&quot; + pkn + \&quot; | grep -v grep | awk &#x27;&#123;print $2&#125;&#x27; | sort | uniq)\&quot;);&#125;;&#125;&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="1-12-应用被杀，自动复活"><a href="#1-12-应用被杀，自动复活" class="headerlink" title="1.12 应用被杀，自动复活"></a><i id="1-12"></i>1.12 应用被杀，自动复活</h3><ul>
<li>来自酷友提供<u><a target="_blank" rel="noopener" href="http://www.coolapk.com/u/21207768" title="**`eriswu`**"><strong><code>eriswu</code></strong></a></u></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;All Start app process&quot;,</span><br><span class="line">&quot;description&quot;: &quot;检测到应用被杀死时，启动该应用进程,全局变量JCFH，作者eriswu提供代码&quot;,</span><br><span class="line">&quot;priority&quot;: 1,</span><br><span class="line">&quot;condition&quot;: &quot;pkgKilled == true &amp;&amp; globalVarOf$JCFH.contains(pkgName)&quot;,</span><br><span class="line">&quot;delay&quot;: 5000,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot;ui.showShortToast(\&quot;Process resurrection👻\&quot;);&quot;,</span><br><span class="line">&quot;activity.launchProcessForPackage(pkgName)&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h2 id="2-保活"><a href="#2-保活" class="headerlink" title="2. 保活"></a><i id="2"></i>2. 保活</h2><h3 id="2-1-应用保活-方案1"><a href="#2-1-应用保活-方案1" class="headerlink" title="2.1 应用保活(方案1)"></a><i id="2-1"></i>2.1 应用保活(方案1)</h3><ul>
<li>注意事项<blockquote>
<ol>
<li>把需要保活的应用放在 全局变量里，当应用被杀死后，该应用就会重新启动</li>
<li>全局变量为：baohuo</li>
<li>作者：默认2234077 <u><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/39045897?shareKey=ZjUxZmQyOTExYjdjNjMxYzdmMDU~&shareUid=3571197&shareFrom" title="原帖"><strong><code>原帖</code></strong></a></u></li>
</ol>
</blockquote>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;应用保活&quot;,</span><br><span class="line">&quot;description&quot;: &quot;应用被杀死则启动其进程&quot;,</span><br><span class="line">&quot;priority&quot;: 1,</span><br><span class="line">&quot;condition&quot;: &quot;pkgKilled == true &amp;&amp; globalVarOf$baohuo.contains(pkgName)&quot;,</span><br><span class="line">&quot;delay&quot;: 1000,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot;activity.launchProcessForPackage(pkgName)&quot;,</span><br><span class="line">&quot;ui.showShortToast(\&quot;启动了:\&quot; + pkgName)&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="2-2-应用保活-方案2"><a href="#2-2-应用保活-方案2" class="headerlink" title="2.2 应用保活(方案2)"></a><i id="2-2"></i>2.2 应用保活(方案2)</h3><ul>
<li><u><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/39717161?shareKey=M2ZmZmI5M2ZmZWQxNjQ0MzU4OTA~&shareUid=3571197&shareFrom" title="**`原帖`**"><strong><code>原帖</code></strong></a></u></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;应用保活&quot;,</span><br><span class="line">&quot;description&quot;: &quot;拉起主进程(但是有时候无法拉起特定服务,或者其子进程)&quot;,</span><br><span class="line">&quot;priority&quot;: 1,</span><br><span class="line">&quot;condition&quot;: &quot;pkgKilled&quot;,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot;if(thanos.getProfileManager().isGlobalRuleVarByNameExists(\&quot;keepAlive\&quot;))&#123;if(globalVarOf$keepAlive.size()==0)&#123;ui.showShortToast(\&quot;请为全局变量添加内容\&quot;)&#125;else&#123;foreach(proc:globalVarOf$keepAlive)&#123;if(!thanos.getActivityManager().isPackageRunning(proc))&#123;activity.launchProcessForPackage(proc);Thread.sleep(6000);if(thanos.getActivityManager().hasRunningServiceForPackage(proc))&#123;ui.showShortToast(\&quot;拉起\&quot;+proc);&#125;else&#123;ui.showLongToast(\&quot;请手动打开:\&quot;+proc);&#125;&#125;&#125;&#125;&#125;else&#123;thanos.getProfileManager().disableRuleByName(\&quot;应用保活\&quot;);thanos.getProfileManager().addGlobalRuleVar(\&quot;keepAlive\&quot;,new String[0]);ui.showShortToast(\&quot;全局变量不存在!\&quot;);&#125;&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="2-3-保活APP"><a href="#2-3-保活APP" class="headerlink" title="2.3 保活APP"></a><i id="2-3"></i>2.3 保活APP</h3><ul>
<li><u><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/45419920?shareKey=NmEzNjg2ODU1Y2YxNjQ0NGU5MDc~&shareUid=3571197&shareFrom" title="**`原帖`**"><strong><code>原帖</code></strong></a></u></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;保活APP&quot;,</span><br><span class="line">&quot;description&quot;: &quot;APP被杀死时，重新启动，全局变量keepAlive&quot;,</span><br><span class="line">&quot;priority&quot;: 1,</span><br><span class="line">&quot;condition&quot;: &quot;pkgKilled == true &amp;&amp; globalVarOf$keepAlive.contains(pkgName)&quot;,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot;activity.launchProcessForPackage(pkgName)&quot;,</span><br><span class="line">&quot;if(thanos.activityManager.hasRunningServiceForPackage(pkgName))&#123;ui.showShortToast(\&quot;👻\&quot; + thanos.pkgManager.getAppInfo(pkgName).appLabel +\&quot;启动成功\&quot;)&#125;else&#123;activity.launchProcessForPackage(pkgName)&#125;&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>



<h3 id="2-4-微信保活"><a href="#2-4-微信保活" class="headerlink" title="2.4 微信保活"></a><i id="2-4"></i>2.4 微信保活</h3><ul>
<li><u><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/45338524?shareKey=MzA4ZTQ5ZDdmMWI0NjQ0MzRkZjU~&shareUid=3571197&shareFrom" title="原帖"><strong><code>原帖</code></strong></a></u></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;微信保活&quot;,</span><br><span class="line">&quot;description&quot;: &quot;微信被杀死时，启动微信进程&quot;,</span><br><span class="line">&quot;priority&quot;: 1,</span><br><span class="line">&quot;condition&quot;: &quot;pkgKilled == true &amp;&amp; pkgName==\&quot;com.tencent.mm\&quot;&quot;,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot;ui.showShortToast(\&quot;保活微信启动\&quot;);&quot;,</span><br><span class="line">&quot;activity.launchProcessForPackage(\&quot;com.tencent.mm\&quot;)&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="2-5-QQ保活"><a href="#2-5-QQ保活" class="headerlink" title="2.5 QQ保活"></a><i id="2-5"></i>2.5 QQ保活</h3><ul>
<li><u><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/35808050?shareKey=ZTczOTFmYWE5Y2ZkNjQ0MzViMWQ~&shareUid=3571197&shareFrom" title="**`原帖`**"><strong><code>原帖</code></strong></a></u></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;QQ保活&quot;,</span><br><span class="line">&quot;description&quot;: &quot;QQ被杀保活&quot;,</span><br><span class="line">&quot;priority&quot;: 1,</span><br><span class="line">&quot;condition&quot;: &quot;pkgKilled == true &amp;&amp; (pkgName == \&quot;com.tencent.mobileqq\&quot;)&quot;,</span><br><span class="line">&quot;actions&quot;:</span><br><span class="line">[</span><br><span class="line">&quot;su.exe(&#x27;am start-foreground-service com.tencent.mobileqq/com.tencent.mobileqq.msf.service.MsfService&#x27;);&quot;,</span><br><span class="line"></span><br><span class="line">&quot;ui.showShortToast(\&quot;[已启动]\&quot;)&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h3 id="2-6-无障碍保活"><a href="#2-6-无障碍保活" class="headerlink" title="2.6 无障碍保活"></a><i id="2-6"></i>2.6 无障碍保活</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;无障碍保活&quot;,</span><br><span class="line">&quot;description&quot;: &quot;保活应用，启动无障碍 全局变量wza&quot;,</span><br><span class="line">&quot;priority&quot;: 2,</span><br><span class="line">&quot;condition&quot;: &quot;pkgKilled == true &amp;&amp; globalVarOf$wza.contains(pkgName)&quot;,</span><br><span class="line">&quot;delay&quot;: 2000,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot;su.exe(&#x27;settings put secure enabled_accessibility_services 无障碍服务名1:服务名2:服务名3&#x27;);&quot;,</span><br><span class="line">&quot;ui.showShortToast(\&quot;[无障碍已启动]\&quot;)&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="2-7-一键启动很多应用"><a href="#2-7-一键启动很多应用" class="headerlink" title="2.7 一键启动很多应用"></a><i id="2-7"></i>2.7 一键启动很多应用</h3><ul>
<li><u><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/39045897?shareKey=NzQ1YTJkMWQwZTk2NjRjNjNjZTM~&shareUid=3119350&shareFrom" title="**`原帖`**"><strong><code>原帖</code></strong></a></u></li>
<li>一键启动很多很多应用，每隔4秒启动一个应用，把需要启动的应用放在变量 hd 里面，新建一个qdyy 的快捷应用连接，快捷名字随意。代码如下:</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;一键启动很多应用&quot;,</span><br><span class="line">&quot;description&quot;: &quot;监听一个快捷方式启动事件&quot;,</span><br><span class="line">&quot;priority&quot;: -1,</span><br><span class="line">&quot;condition&quot;: &quot;shortcutLaunched == true &amp;&amp; shortcutValue == \&quot;qdyy\&quot;&quot;,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot;foreach (pkn : globalVarOf$hd)&#123;ui.showShortToast(\&quot;启动中\&quot;);Thread.sleep(4000);activity.launchMainActivityForPackage(pkn)&#125;&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h2 id="3-定位"><a href="#3-定位" class="headerlink" title="3. 定位"></a><i id="3"></i>3. 定位</h2><h3 id="3-1-自动GPS"><a href="#3-1-自动GPS" class="headerlink" title="3.1 自动GPS"></a><i id="3-1"></i>3.1 自动GPS</h3><ul>
<li><u><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/45564367?shareKey=Mjc5YTBlMDU1YjE0NjQ0YjZjNDk~&shareUid=3044819&shareFrom" title="原帖"><strong><code>原帖</code></strong></a></u></li>
<li>全局变量分两个<ul>
<li>GPSApp</li>
</ul>
<ol>
<li>只写包名：进入应用打开GPS，回到桌面关闭GPS</li>
<li>包名后面+空格+#，例如微信：【com.tencent.mm #】则当微信被杀死才关闭GPS</li>
</ol>
<ul>
<li>GPSUI<ul>
<li>填写：目标界面组件名(就是Activity)</li>
</ul>
</li>
</ul>
</li>
<li>须知：如果退出前台GPS应用，就会轮询是否有后台GPS应用在运行，如果有就不会关闭，没有就关闭，UI同理</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        &quot;name&quot;: &quot;Auto GPS&quot;,</span><br><span class="line"></span><br><span class="line">        &quot;description&quot;: &quot;by诗里沧海怨怼 | 打开指定应用,打开GPS;[关闭|切换]指定应用,关闭GPS&quot;,</span><br><span class="line"></span><br><span class="line">        &quot;priority&quot;: 1,</span><br><span class="line"></span><br><span class="line">        &quot;condition&quot;: &quot;if(pkgKilled)&#123;curs=su.exe(\&quot;dumpsys activity activities|grep ResumedActivity|awk &#x27;&#123;print $3&#125;&#x27;\&quot;).out[0].split(&#x27;/&#x27;);if(curs[1].charAt(curs[1].length()-1)==&#x27;&#125;&#x27;)&#123;curs[1]=curs[1].substring(0,curs[1].length()-1);&#125;for(acti:globalVarOf$GPSUI)&#123;if(acti!=null&amp;&amp;acti.startsWith(curs[0])&amp;&amp;acti.endsWith(curs[1]))&#123;return;&#125;&#125;for(app:globalVarOf$GPSApp)&#123;if(app!=null&amp;&amp;!app.startsWith(pkgName))&#123;if(app.startsWith(curs[0])||app.charAt(app.length()-1)==&#x27;#&#x27;&amp;&amp;thanos.activityManager.isPackageRunning(app.split(&#x27; &#x27;)[0]))&#123;return;&#125;&#125;&#125;if(hw.isLocationEnabled())&#123;su.exe(&#x27;settings put secure location_mode 0&#x27;);&#125;&#125;else if(activityResumed)&#123;pName=componentNameAsString.split(&#x27;/&#x27;)[0];gapps=globalVarOf$GPSApp ;if(gapps.contains(pName))&#123;if(!hw.isLocationEnabled())&#123;su.exe(&#x27;settings put secure location_mode 3&#x27;);&#125;&#125;else if(globalVarOf$GPSUI.contains(componentNameAsString))&#123;if(!hw.isLocationEnabled())&#123;su.exe(&#x27;settings put secure location_mode 3&#x27;);&#125;&#125;else&#123;for(app:gapps)&#123;if(app!=null)&#123;if(app.charAt(app.length()-1)==&#x27;#&#x27;&amp;&amp;thanos.activityManager.isPackageRunning(app.split(&#x27; &#x27;)[0]))&#123;if(!hw.isLocationEnabled())&#123;su.exe(&#x27;settings put secure location_mode 3&#x27;);&#125;return;&#125;&#125;&#125;if(hw.isLocationEnabled())&#123;su.exe(&#x27;settings put secure location_mode 0&#x27;);&#125;&#125;&#125;&quot;,&quot;actions&quot;: [&quot;&quot;]</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="3-2-自动开关GPS"><a href="#3-2-自动开关GPS" class="headerlink" title="3.2 自动开关GPS"></a><i id="3-2"></i>3.2 自动开关GPS</h3><ul>
<li>注意事项<blockquote>
<ol>
<li>全局变量为：GPSapp</li>
<li>作者：默认2234077 <u><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/39045897?shareKey=ZjUxZmQyOTExYjdjNjMxYzdmMDU~&shareUid=3571197&shareFrom" title="原帖"><strong><code>原帖</code></strong></a></u></li>
</ol>
</blockquote>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">    &quot;name&quot;: &quot;自动开关GPS&quot;,</span><br><span class="line">    &quot;description&quot;: &quot;变量应用自动开GPS,直到最近任务没有需要gps的应用才会关闭。&quot;,</span><br><span class="line">    &quot;priority&quot;: 1,</span><br><span class="line">    &quot;condition&quot;: &quot;int c = 0 ;if(frontPkgChanged == true &amp;&amp; globalVarOf$GPSapp.contains(to))&#123;ui.showShortToast(\&quot;GPS打开\&quot; + (hw.enableLocation() ? \&quot;成功\&quot; : \&quot;失败\&quot;)) ;&#125;else if(pkgKilled == true &amp;&amp; globalVarOf$GPSapp.contains(pkgName))&#123;foreach (pkn : globalVarOf$GPSapp)&#123;if(task.hasTaskFromPackage(pkn) == true) &#123;c++ ;break ;&#125; ;&#125;if(c != 0)&#123;break ;&#125;else&#123;hw.disableLocation() ;break ;&#125;break ;&#125;&quot;,</span><br><span class="line">    &quot;actions&quot;: [</span><br><span class="line">    &quot;&quot;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h3 id="3-3-微信位置共享"><a href="#3-3-微信位置共享" class="headerlink" title="3.3 微信位置共享"></a><i id="3-3"></i>3.3 微信位置共享</h3><ul>
<li><u><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/20272935?shareKey=ZTdlNjhmZTU0NGFkNjQ0MjJiOTM~&shareUid=3571197&shareFrom" title="**`原帖`**"><strong><code>原帖</code></strong></a></u></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;位置共享&quot;,</span><br><span class="line">&quot;description&quot;: &quot;打开微信共享位置或者定位界面时打开GPS，返回聊天界面关闭GPS。酷安@幻觉&quot;,</span><br><span class="line">&quot;priority&quot;: 1,</span><br><span class="line">&quot;condition&quot;: &quot;if(activityResumed == true &amp;&amp; hw.isLocationEnabled() == false &amp;&amp; componentNameAsShortString == \&quot;com.tencent.mm/.plugin.location_soso.SoSoProxyUI\&quot;) &#123; (hw.enableLocation() ?) + ui.showShortToast(\&quot;开启GPS\&quot;)&#125; else if ( activityResumed == true &amp;&amp; hw.isLocationEnabled() == true &amp;&amp; componentNameAsShortString == \&quot;com.tencent.mm/.ui.LauncherUI\&quot;) &#123; (hw.disableLocation() ?) + ui.showShortToast(\&quot;关闭GPS\&quot;)&#125;&quot;,</span><br><span class="line">&quot;actions&quot;: [&quot;&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h2 id="4-打盹"><a href="#4-打盹" class="headerlink" title="4. 打盹"></a><i id="4"></i>4. 打盹</h2><h3 id="4-1-息-亮屏进-退打盹"><a href="#4-1-息-亮屏进-退打盹" class="headerlink" title="4.1 息&#x2F;亮屏进&#x2F;退打盹"></a><i id="4-1"></i>4.1 息&#x2F;亮屏进&#x2F;退打盹</h3><ul>
<li>注意事项<blockquote>
<ol>
<li>下面两个分开，且都要刷</li>
<li>以下2个情景模式摘自 作者：l奋斗的小青年</li>
<li><u><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/31085113?shareKey=ZjIyMDI1YzE0MWI5NjMxYzg3ZWI~&shareFrom" title="原帖"><strong><code>原帖</code></strong></a></u></li>
</ol>
</blockquote>
</li>
</ul>
<ol>
<li>息屏进入打盹</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">    &quot;name&quot;: &quot;Doze打盹：息屏进入打盹&quot;,</span><br><span class="line">    &quot;description&quot;: &quot;息屏进入深度打盹模式Doze&quot;,</span><br><span class="line">    &quot;priority&quot;: 1,</span><br><span class="line">    &quot;condition&quot;: &quot;screenOff == true&quot;,</span><br><span class="line">    &quot;actions&quot;: [</span><br><span class="line">    &quot;sh.exe(\&quot;dumpsys deviceidle enable deep\&quot;);&quot;,</span><br><span class="line">    &quot;sh.exe(\&quot;dumpsys deviceidle force-idle deep\&quot;);&quot;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>亮屏退出打盹</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">    &quot;name&quot;: &quot;Doze打盹：亮屏退出打盹&quot;,</span><br><span class="line">    &quot;description&quot;: &quot;亮屏退出深度打盹模式&quot;,</span><br><span class="line">    &quot;priority&quot;: 1,</span><br><span class="line">    &quot;condition&quot;: &quot;screenOn == true&quot;,</span><br><span class="line">    &quot;actions&quot;:</span><br><span class="line">    [</span><br><span class="line">    &quot;sh.exe(\&quot;dumpsys deviceidle disable all\&quot;);&quot;,</span><br><span class="line">    &quot;sh.exe(\&quot;dumpsys deviceidle unforce\&quot;);&quot;	,</span><br><span class="line">    &quot;sh.exe(\&quot;dumpsys battery reset\&quot;);&quot;</span><br><span class="line">    ]</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="4-2-息-亮屏进-退打盹进阶"><a href="#4-2-息-亮屏进-退打盹进阶" class="headerlink" title="4.2 息&#x2F;亮屏进&#x2F;退打盹进阶"></a><i id="4-2"></i>4.2 息&#x2F;亮屏进&#x2F;退打盹进阶</h3><ul>
<li><u><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/39314021?shareKey=YmRmY2UwNWM3OTYzNjQ0MzVjY2Y~&shareUid=3571197&shareFrom" title="**`原帖`**"><strong><code>原帖</code></strong></a></u></li>
</ul>
<ol>
<li>息屏进入打盹</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;深度doze：息屏进入打盹&quot;,</span><br><span class="line">&quot;description&quot;: &quot;息屏进入深度打盹模式Doze并屏蔽传感器&quot;,</span><br><span class="line">&quot;priority&quot;: 1,</span><br><span class="line">&quot;condition&quot;: &quot;screenOff == true&quot;,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot;su.exe(\&quot;dumpsys deviceidle enable deep\&quot;);&quot;,</span><br><span class="line">&quot;su.exe(\&quot;dumpsys deviceidle force-idle deep\&quot;);&quot;,</span><br><span class="line">&quot;su.exe(\&quot;service call sensor_privacy 8 i32 1\&quot;);&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>亮屏退出打盹</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;深度doze：亮屏退出打盹&quot;,</span><br><span class="line">&quot;description&quot;: &quot;亮屏退出深度打盹模式并恢复传感器&quot;,</span><br><span class="line">&quot;priority&quot;: 1,</span><br><span class="line">&quot;condition&quot;: &quot;screenOn == true&quot;,</span><br><span class="line">&quot;actions&quot;:</span><br><span class="line">[</span><br><span class="line">&quot;su.exe(\&quot;dumpsys deviceidle disable all\&quot;);&quot;,</span><br><span class="line">&quot;su.exe(\&quot;dumpsys deviceidle unforce\&quot;);&quot; ,</span><br><span class="line">&quot;su.exe(\&quot;service call sensor_privacy 8 i32 0\&quot;);&quot;,</span><br><span class="line">&quot;su.exe(\&quot;dumpsys battery reset\&quot;);&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="4-3-深度doze并屏蔽传感器延迟版"><a href="#4-3-深度doze并屏蔽传感器延迟版" class="headerlink" title="4.3 深度doze并屏蔽传感器延迟版"></a><i id="4-3"></i>4.3 深度doze并屏蔽传感器延迟版</h3><ul>
<li><u><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/40016015?shareKey=NTg3MjAwMWM5OGI1NjQ0MzVlYTQ~&shareUid=3571197&shareFrom" title="**`原帖`**"><strong><code>原帖</code></strong></a></u></li>
<li>安卓13要把8改9才能用</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;深度doze：亮屏退出打盹&quot;,</span><br><span class="line">&quot;description&quot;: &quot;亮屏退出深度打盹模式并恢复传感器&quot;,</span><br><span class="line">&quot;priority&quot;: 1,</span><br><span class="line">&quot;condition&quot;: &quot;screenOn == true&quot;,</span><br><span class="line">&quot;actions&quot;:</span><br><span class="line">[</span><br><span class="line">&quot;su.exe(\&quot;dumpsys deviceidle disable all\&quot;);&quot;,</span><br><span class="line">&quot;su.exe(\&quot;dumpsys deviceidle unforce\&quot;);&quot; ,</span><br><span class="line">&quot;su.exe(\&quot;service call sensor_privacy 8 i32 0\&quot;);&quot;,</span><br><span class="line">&quot;su.exe(\&quot;dumpsys battery reset\&quot;);&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;深度doze：息屏进入打盹（延迟版）&quot;,</span><br><span class="line">&quot;description&quot;: &quot;息屏1分钟后进入深度打盹模式Doze并屏蔽传感器&quot;,</span><br><span class="line">&quot;priority&quot;: 2,</span><br><span class="line">&quot;delay&quot;: 60000,</span><br><span class="line">&quot;condition&quot;: &quot;screenOff == true&quot;,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot;su.exe(\&quot;dumpsys deviceidle enable deep\&quot;);&quot;,</span><br><span class="line">&quot;su.exe(\&quot;dumpsys deviceidle force-idle deep\&quot;);&quot;,</span><br><span class="line">&quot;su.exe(\&quot;service call sensor_privacy 8 i32 1\&quot;);&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;深度doze：亮屏退出打盹(延迟版)附加模块&quot;,</span><br><span class="line">&quot;description&quot;: &quot;解决延迟后反复开关屏产生bug的问题&quot;,</span><br><span class="line">&quot;priority&quot;: 1,</span><br><span class="line">&quot;delay&quot;: 61000,</span><br><span class="line">&quot;condition&quot;: &quot;screenOn == true&quot;,</span><br><span class="line">&quot;actions&quot;:</span><br><span class="line">[</span><br><span class="line">&quot;su.exe(\&quot;dumpsys deviceidle disable all\&quot;);&quot;,</span><br><span class="line">&quot;su.exe(\&quot;dumpsys deviceidle unforce\&quot;);&quot; ,</span><br><span class="line">&quot;su.exe(\&quot;service call sensor_privacy 8 i32 0\&quot;);&quot;,</span><br><span class="line">&quot;su.exe(\&quot;dumpsys battery reset\&quot;);&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="4-4-开机关闭打盹"><a href="#4-4-开机关闭打盹" class="headerlink" title="4.4 开机关闭打盹"></a><i id="4-4"></i>4.4 开机关闭打盹</h3><ul>
<li><u><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/37649574?shareKey=NTVmNGI4YTEzZTg3NjQ0MzVmOTQ~&shareUid=3571197&shareFrom" title="**`原帖`**"><strong><code>原帖</code></strong></a></u></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;开机关闭打盹&quot;,</span><br><span class="line">&quot;description&quot;: &quot;开机关闭打盹&quot;,</span><br><span class="line">&quot;priority&quot;: 1,</span><br><span class="line">&quot;condition&quot;: &quot;systemReady == true&quot;,</span><br><span class="line">&quot;delay&quot;: 60000,</span><br><span class="line">&quot;actions&quot;: [ &quot;su.exe(&#x27;dumpsys deviceidle disable&#x27;);&quot;,</span><br><span class="line">&quot;ui.showShortToast(\&quot;😘已关闭打盹\&quot;)&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h2 id="5-WIFI"><a href="#5-WIFI" class="headerlink" title="5. WIFI"></a><i id="5"></i>5. WIFI</h2><h3 id="5-1-WiFi与移动数据网络的自动切换"><a href="#5-1-WiFi与移动数据网络的自动切换" class="headerlink" title="5.1 WiFi与移动数据网络的自动切换"></a><i id="5-1"></i>5.1 WiFi与移动数据网络的自动切换</h3><ul>
<li>注意事项<blockquote>
<ol>
<li>下面三个情景模式是一套的，都需要刷入</li>
<li>开发者模式中的 “始终开启移动数据网络” 需要关闭，如果开启，情景模式将失效</li>
<li>作用：为了实现wifi与移动网络的全自动&#x2F;半自动切换。使用wifi时自动关闭移动网络，wifi断开以后立即自动开启移动网络，并且一定时限内未重新连接上wifi热点自动关闭wlan。简单说就是有啥用啥并且关闭另一个网络（wifi&#x2F;数据），降低网络耗电的同时保证随时有网络连接。</li>
<li>以下3个情景模式摘自 作者：第二次用户名违规</li>
<li><u><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/37658594?shareKey=YmRmYzJmODgyMzViNjMxZDg4OTU~&shareUid=2810379&shareFrom" title="原帖"><strong><code>原帖</code></strong></a></u></li>
</ol>
</blockquote>
</li>
</ul>
<ol>
<li>数据和wifi自动切换</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;数据和wifi自动切换&quot;,</span><br><span class="line">&quot;description&quot;: &quot; 数据和wifi自动切换开关 &quot;,</span><br><span class="line">&quot;priority&quot;: 1,</span><br><span class="line">&quot;condition&quot;: &quot;if( wifiStateChanged == true &amp;&amp; wifiState.ssid == null &amp;&amp; data.isDataEnabled() == false) &#123;( ui.showShortToast(\&quot;打开数据流量\&quot;) + data.setDataEnabled(true))&#125; else if ( wifiStateChanged == true &amp;&amp; wifiState.enabled == true &amp;&amp; wifiState.ssid != null &amp;&amp; data.isDataEnabled()== true) &#123; (ui.showShortToast(\&quot;关闭数据流量\&quot;) + data.setDataEnabled(false) )&#125;&quot;,</span><br><span class="line">&quot;actions&quot;: [&quot;&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>监测WiFi是否与热点断开</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;监测WiFi是否与热点断开&quot;,</span><br><span class="line">&quot;description&quot;: &quot; 若WiFi与当前热点断开连接，等待60秒后发送通知，判断是否重新连上WiFi热点&quot;,</span><br><span class="line">&quot;delay&quot;:60000,</span><br><span class="line">&quot;priority&quot;: 2,</span><br><span class="line">&quot;condition&quot;: &quot;wifiStateChanged == true &amp;&amp; hw.isWifiEnabled== true &quot;,</span><br><span class="line">&quot;actions&quot;: [&quot;ui.showNotification(&#x27;wf&#x27;, &#x27;WiFi连接状态&#x27;, context.getSystemService(&#x27;wifi&#x27;).getConnectionInfo().getSSID(), false);&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>判断是否关闭WiFi</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;判断是否关闭WiFi&quot;,</span><br><span class="line">&quot;description&quot;: &quot;获取当前WiFi连接状态，若未连接到任何热点则关闭WLAN并关闭通知，否则不进行任何操作并关闭通知&quot;,</span><br><span class="line">&quot;priority&quot;: 2,</span><br><span class="line">&quot;condition&quot;: &quot;if(notificationAdded==true &amp;&amp; notificationContent == &#x27;&lt;unknown ssid&gt;&#x27;) &#123;hw.disableWifi();ui.showShortToast(&#x27;WiFi已关闭&#x27;);ui.cancelNotification(&#x27;wf&#x27;);&#125; else if(notificationAdded==true &amp;&amp; notificationContent !=( &#x27;&lt;unknown ssid&gt;&#x27;)) &#123;ui.cancelNotification(&#x27;wf&#x27;)&#125; &quot;,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot; &quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="5-2-自动开关WIFI"><a href="#5-2-自动开关WIFI" class="headerlink" title="5.2 自动开关WIFI"></a><i id="5-2"></i>5.2 自动开关WIFI</h3><ul>
<li><u><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/23374387?shareKey=YWQyYTI5ODc2YThkNjQ0MjJhN2E~&shareUid=3571197&shareFrom" title="**`原帖`**"><strong><code>原帖</code></strong></a></u></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;自动开关WIFI&quot;,</span><br><span class="line">&quot;description&quot;: &quot;息屏5秒后关闭WIFI，解锁1秒后打开WIFI，酷安@幻觉&quot;,</span><br><span class="line">&quot;priority&quot;: 2,</span><br><span class="line">&quot;condition&quot;: &quot;if( hw.isWifiEnabled() == true &amp;&amp; screenOff==true) &#123; (Thread.sleep(5000) + hw.disableWifi() ) &#125; else if ( hw.isWifiEnabled() == false &amp;&amp; userPresent==true) &#123; (Thread.sleep(1000) + hw.enableWifi() ) &#125;&quot;,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot;&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="5-3-数据和wifi"><a href="#5-3-数据和wifi" class="headerlink" title="5.3 数据和wifi"></a><i id="5-3"></i>5.3 数据和wifi</h3><ul>
<li><u><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/45338524?shareKey=MzA4ZTQ5ZDdmMWI0NjQ0MzRkZjU~&shareUid=3571197&shareFrom" title="原帖"><strong><code>原帖</code></strong></a></u></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;数据和wifi&quot;,</span><br><span class="line">&quot;description&quot;: &quot;连上wifi，关闭数据，断开连接，开启数据&quot;,</span><br><span class="line">&quot;priority&quot;: 1,</span><br><span class="line">&quot;condition&quot;: &quot;if( wifiStateChanged == true &amp;&amp; wifiState.ssid == null &amp;&amp; data.isDataEnabled() == false) &#123; data.setDataEnabled(true) &#125; else if ( wifiStateChanged == true &amp;&amp; wifiState.enabled == true &amp;&amp; wifiState.ssid != null &amp;&amp; data.isDataEnabled()== true) &#123; data.setDataEnabled(false) &#125;&quot;,</span><br><span class="line">&quot;actions&quot;: [&quot;&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h2 id="6-FCM"><a href="#6-FCM" class="headerlink" title="6. FCM"></a><i id="6"></i>6. FCM</h2><h3 id="6-1-墓碑模式FCM推送"><a href="#6-1-墓碑模式FCM推送" class="headerlink" title="6.1 墓碑模式FCM推送"></a><i id="6-1"></i>6.1 墓碑模式FCM推送</h3><ul>
<li>来自NoActive群友投稿</li>
<li><u><a target="_blank" rel="noopener" href="http://www.coolapk.com/u/427700" title="**`索尼CBO`**"><strong><code>索尼CBO</code></strong></a></u></li>
<li>该情景模式只适配了FreezeV2 UID模式</li>
</ul>
<ol>
<li>一代</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    &quot;name&quot;: &quot;墓碑模式FCM推送&quot;,</span><br><span class="line">    &quot;description&quot;: &quot;对于支持FCM推送的应用，当其收到推送并且处于后台时，唤醒它5秒&quot;,</span><br><span class="line">    &quot;priority&quot;: -1,</span><br><span class="line">    &quot;condition&quot;: &quot;fcmPushMessageArrived == true&quot;,</span><br><span class="line">    &quot;actions&quot;: [</span><br><span class="line">      &quot;def freeze(pkg) &#123; su.exe(\&quot;pm list packages -U | grep \&quot; + pkg + \&quot; | awk -F &#x27;[:,]&#x27; &#x27;&#123;print $3; print $4;&#125;&#x27; | while read uid; do ls /sys/fs/cgroup/uid_$uid | grep pid_ | while read pid; do echo 1 &gt; /sys/fs/cgroup/uid_$uid/$pid/cgroup.freeze; done; done\&quot;); &#125; def unfreeze(pkg) &#123; su.exe(\&quot;pm list packages -U | grep \&quot; + pkg + \&quot; | awk -F &#x27;[:,]&#x27; &#x27;&#123;print $3; print $4;&#125;&#x27; | while read uid; do ls /sys/fs/cgroup/uid_$uid | grep pid_ | while read pid; do echo 0 &gt; /sys/fs/cgroup/uid_$uid/$pid/cgroup.freeze; done; done\&quot;); &#125; def allowWakeLock(pkg) &#123; su.exe(\&quot;appops set \&quot; + pkg + \&quot; WAKE_LOCK default\&quot;); &#125; def denyWakeLock(pkg) &#123; su.exe(\&quot;appops set \&quot; + pkg + \&quot; WAKE_LOCK ignore\&quot;); &#125; def isVisible(pkg) &#123; return activity.getFrontAppPackage() == pkg || thanos.windowManager.hasVisibleWindows(pkg); &#125; if (!isVisible(pkgName)) &#123; unfreeze(pkgName); allowWakeLock(pkgName); Thread.sleep(5000); denyWakeLock(pkgName); freeze(pkgName); &#125;&quot;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>2代</li>
</ol>
<ul>
<li><u><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/45826044?shareKey=ODRjMmZiZWQwN2RkNjQ1OWIxYTc~&shareUid=3571197&shareFrom" title="**`原帖`**"><strong><code>原帖</code></strong></a></u></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    &quot;name&quot;: &quot;墓碑模式FCM推送v2&quot;,</span><br><span class="line">    &quot;description&quot;: &quot;对于支持FCM推送的应用，当其收到推送并且处于后台时，唤醒它5秒。\n仅适配了FreezerV2(uid)控制器，使用NoActive测试正常，理论上与各墓碑模块兼容。&quot;,</span><br><span class="line">    &quot;priority&quot;: -1,</span><br><span class="line">    &quot;condition&quot;: &quot;fcmPushMessageArrived == true&quot;,</span><br><span class="line">    &quot;actions&quot;: [</span><br><span class="line">      &quot;def formatMsg(msg) &#123; return \&quot;🚀 \&quot; + msg; &#125; def getRunningPkgList() &#123; return thanos.getActivityManager().getRunningAppPackages(); &#125; def getProcessListByPkg(pkg) &#123; return thanos.getActivityManager().getRunningAppProcessForPackage(pkg); &#125; def getPkgListByPkgName(pkgName) &#123; res = []; foreach(pkg : getRunningPkgList()) &#123; if (pkg.getPkgName() == pkgName) &#123; res.add(pkg); &#125; &#125; return res; &#125; def getProcessFrozenStatus(process) &#123; return su.exe(\&quot;cat /sys/fs/cgroup/uid_\&quot; + process.getUid() + \&quot;/pid_\&quot; + process.getPid() + \&quot;/cgroup.freeze\&quot;).out[0]; &#125; def setProcessFrozenStatus(process, status) &#123; su.exe(\&quot;echo \&quot; + status + \&quot; &gt; /sys/fs/cgroup/uid_\&quot; + process.getUid() + \&quot;/pid_\&quot; + process.getPid() + \&quot;/cgroup.freeze\&quot;); &#125; def main() &#123; log.log(formatMsg(\&quot;收到 FCM 推送: \&quot; + pkgName)); pkgList = getPkgListByPkgName(pkgName); if (pkgList.size() == 0) &#123; log.log(formatMsg(\&quot;未找到正在运行的进程\&quot;)); return; &#125; else &#123; log.log(formatMsg(\&quot;正在运行的进程列表: \&quot; + (pkgName in pkgList))); &#125; processList = []; foreach(pkg : pkgList) &#123; foreach(process : getProcessListByPkg(pkg)) &#123; if (getProcessFrozenStatus(process) == \&quot;1\&quot;) &#123; processList.add(process); &#125; &#125; &#125; if (processList.size() == 0) &#123; log.log(formatMsg(\&quot;未找到已冻结的进程\&quot;)); return; &#125; else &#123; log.log(formatMsg(\&quot;已冻结的进程列表: \&quot; + (processName in processList))); &#125; log.log(formatMsg(\&quot;开始解冻进程\&quot;)); foreach(process : processList) &#123; setProcessFrozenStatus(process, \&quot;0\&quot;); &#125; log.log(formatMsg(\&quot;解冻进程完成\&quot;)); Thread.sleep(5000); log.log(formatMsg(\&quot;开始冻结进程\&quot;)); foreach(process : processList) &#123; setProcessFrozenStatus(process, \&quot;1\&quot;); &#125; log.log(formatMsg(\&quot;冻结进程完成\&quot;)); &#125; main();&quot;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>2.1代</li>
</ol>
<ul>
<li><u><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/46462851?shareKey=NDMzMWVmMzhiYjQwNjQ3OWYyYmM~&shareUid=3571197&shareFrom" title="**`原帖`**"><strong><code>原帖</code></strong></a></u></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    &quot;name&quot;: &quot;墓碑模式FCM推送v2.1&quot;,</span><br><span class="line">    &quot;description&quot;: &quot;！！！Thanox需要更新到v4.1.9或更高版本！！！\n对于支持FCM推送的应用，当其收到推送并且处于后台时，唤醒它5秒。\n仅适配了FreezerV2(uid)控制器，使用NoActive测试正常，理论上与各墓碑模块兼容。&quot;,</span><br><span class="line">    &quot;priority&quot;: -1,</span><br><span class="line">    &quot;condition&quot;: &quot;fcmPushMessageArrived == true&quot;,</span><br><span class="line">    &quot;actions&quot;: [</span><br><span class="line">      &quot;def debug(msg) &#123; log.log(\&quot;🚀 \&quot; + msg); &#125; def getUserIdList() &#123; userList = context.getSystemService(context.USER_SERVICE).getUsers(); userIdList = (identifier in (userHandle in userList)); return userIdList; &#125; def getPkgByNameAndUserId(pkgName, userId) &#123; pkg = Pkg.newPkg(pkgName, userId); return pkg; &#125; def isValidPkg(pkg) &#123; return thanos.getPkgManager().getAppInfo(pkg) != null; &#125; def getPkgListByPkgName(pkgName) &#123; userIdList = getUserIdList(); res = []; foreach(userId: userIdList) &#123; pkg = getPkgByNameAndUserId(pkgName, userId); if (isValidPkg(pkg)) &#123; res.add(pkg); &#125; &#125; return res; &#125; def getProcessListByPkgList(pkgList) &#123; processList = []; foreach(pkg : pkgList) &#123; processList.addAll(thanos.getActivityManager().getRunningAppProcessForPackage(pkg)); &#125; return processList; &#125; def isPkgVisible(pkg) &#123; return thanos.getActivityManager().isAppForeground(pkg) || thanos.getWindowManager().hasVisibleWindows(pkg); &#125; def getProcessFrozenStatus(process) &#123; return su.exe(\&quot;cat /sys/fs/cgroup/uid_\&quot; + process.getUid() + \&quot;/pid_\&quot; + process.getPid() + \&quot;/cgroup.freeze\&quot;).out[0]; &#125; def setProcessFrozenStatus(process, status) &#123; su.exe(\&quot;echo \&quot; + status + \&quot; &gt; /sys/fs/cgroup/uid_\&quot; + process.getUid() + \&quot;/pid_\&quot; + process.getPid() + \&quot;/cgroup.freeze\&quot;); &#125; def main() &#123; debug(\&quot;收到 FCM 推送: \&quot; + pkgName); pkgList = getPkgListByPkgName(pkgName); processList = getProcessListByPkgList(pkgList); if (processList.size() == 0) &#123; debug(\&quot;应用尚未运行，尝试启动应用\&quot;); isLaunched = activity.launchProcessForPackage(pkgName); if (!isLaunched) &#123; debug(\&quot;启动应用失败\&quot;); return; &#125; else &#123; debug(\&quot;启动应用成功\&quot;); &#125; debug(\&quot;等待应用启动完成\&quot;); Thread.sleep(3000); processList = getProcessListByPkgList(pkgList); debug(\&quot;需要冻结的进程列表: \&quot; + (processName in processList)); &#125; else &#123; debug(\&quot;正在运行的进程列表: \&quot; + (processName in processList)); frozenProcessList = []; foreach(process : processList) &#123; if (getProcessFrozenStatus(process) == \&quot;1\&quot;) &#123; frozenProcessList.add(process); &#125; &#125; if (frozenProcessList.size() == 0) &#123; debug(\&quot;未找到已冻结的进程\&quot;); return; &#125; else &#123; debug(\&quot;已冻结的进程列表: \&quot; + (processName in frozenProcessList)); &#125; debug(\&quot;开始解冻进程\&quot;); foreach(process : frozenProcessList) &#123; setProcessFrozenStatus(process, \&quot;0\&quot;); &#125; debug(\&quot;解冻进程完成\&quot;); processList = frozenProcessList; &#125; Thread.sleep(5000); foreach(pkg : pkgList) &#123; if (isPkgVisible(pkg)) &#123; debug(\&quot;应用正在前台运行，跳过冻结\&quot;); return; &#125; &#125; debug(\&quot;开始冻结进程\&quot;); foreach(process : processList) &#123; setProcessFrozenStatus(process, \&quot;1\&quot;); &#125; debug(\&quot;冻结进程完成\&quot;); &#125; main();&quot;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h2 id="7-QW优化"><a href="#7-QW优化" class="headerlink" title="7. QW优化"></a><i id="7"></i>7. QW优化</h2><h3 id="7-1-微信FCM推送"><a href="#7-1-微信FCM推送" class="headerlink" title="7.1 微信FCM推送"></a><i id="7-1"></i>7.1 微信FCM推送</h3><ol>
<li>一代</li>
</ol>
<ul>
<li><u><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/43891503?shareKey=ZGEzOTUyODY5MjE4NjQxYjAzM2E~&shareUid=23911084&shareFrom" title="**`原帖`**"><strong><code>原帖</code></strong></a></u></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;微信进程优化&quot;,</span><br><span class="line">&quot;description&quot;: &quot;优化保留双进程，同时开启fcm服务&quot;,</span><br><span class="line">&quot;priority&quot;: 2,</span><br><span class="line">&quot;condition&quot;: &quot;frontPkgChanged == true &amp;&amp; from == \&quot;com.tencent.mm\&quot;&quot;,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot;Thread.sleep(3000);&quot;,</span><br><span class="line">&quot;su.exe(\&quot;ps -ef|grep com.tencent.mm:|grep -v :push|grep -v grep|awk &#x27;&#123;print $2&#125;&#x27;|xargs kill -9\&quot;)&quot;,</span><br><span class="line">&quot;su.exe(\&quot;am start-foreground-service -n com.tencent.mm/com.tencent.mm.plugin.fcm.WCFirebaseMessagingService\&quot;)&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>二代</li>
</ol>
<ul>
<li><u><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/44407705?shareKey=MThiMzk0MjVjZGE2NjQzZTkzMGE~&shareUid=10892111&shareFrom" title="**`原帖`**"><strong><code>原帖</code></strong></a></u></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;微信进程优化&quot;,</span><br><span class="line">&quot;description&quot;: &quot;优化保留双进程，同时开启fcm推送&quot;,</span><br><span class="line">&quot;priority&quot;: 2,</span><br><span class="line">&quot;condition&quot;: &quot;frontPkgChanged == true &amp;&amp; from == \&quot;com.tencent.mm\&quot;&quot;,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot;Thread.sleep(3000);&quot;,</span><br><span class="line">&quot;su.exe(\&quot;ps -ef|grep com.tencent.mm:|grep -v :push|grep -v grep|awk &#x27;&#123;print $2&#125;&#x27;|xargs kill -9\&quot;)&quot;,</span><br><span class="line">&quot;su.exe(\&quot;am stopservice -n com.tencent.mm/com.tencent.mm.ipcinvoker.wx_extension.service.PushProcessIPCService\&quot;)&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="7-2-QQ-微信后台优化"><a href="#7-2-QQ-微信后台优化" class="headerlink" title="7.2 QQ&#x2F;微信后台优化"></a><i id="7-2"></i>7.2 QQ&#x2F;微信后台优化</h3><ul>
<li><u><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/42184751?shareKey=Y2EzZWNiMTdjYjU4NjQ0MjFlYmI~&shareFrom" title="**`原帖`**"><strong><code>原帖</code></strong></a></u></li>
<li>QQ：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;QQ进程优化&quot;,</span><br><span class="line">&quot;description&quot;: &quot;优化保留双进程和通话&quot;,</span><br><span class="line">&quot;priority&quot;: 2,</span><br><span class="line">&quot;condition&quot;: &quot;frontPkgChanged == true &amp;&amp; from == \&quot;com.tencent.mobileqq\&quot;&quot;,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot;Thread.sleep(3000);&quot;,</span><br><span class="line">&quot;su.exe(\&quot;ps -ef|grep com.tencent.mobileqq:|grep -v :MSF|grep -v :video|grep -v grep|awk &#x27;&#123;print $2&#125;&#x27;|xargs kill -9\&quot;)&quot;,</span><br><span class="line">&quot;ui.showShortToast(\&quot;已清理QQ\&quot;)&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<ul>
<li>微信：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;微信进程优化&quot;,</span><br><span class="line">&quot;description&quot;: &quot;优化保留双进程&quot;,</span><br><span class="line">&quot;priority&quot;: 2,</span><br><span class="line">&quot;condition&quot;: &quot;frontPkgChanged == true &amp;&amp; from == \&quot;com.tencent.mm\&quot;&quot;,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot;Thread.sleep(3000);&quot;,</span><br><span class="line">&quot;su.exe(\&quot;ps -ef|grep com.tencent.mm:|grep -v :push|grep -v grep|awk &#x27;&#123;print $2&#125;&#x27;|xargs kill -9\&quot;)&quot;,</span><br><span class="line">&quot;ui.showShortToast(\&quot;已清理微信\&quot;)&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="7-3-QQ进程优化"><a href="#7-3-QQ进程优化" class="headerlink" title="7.3 QQ进程优化"></a><i id="7-3"></i>7.3 QQ进程优化</h3><ul>
<li>一位不愿透露姓名的群友提供由<u><a href="#QQ/%E5%BE%AE%E4%BF%A1%E5%90%8E%E5%8F%B0%E4%BC%98%E5%8C%96"><strong><code>QQ/微信后台优化</code></strong></a></u>改版</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;QQ进程优化&quot;,</span><br><span class="line">&quot;description&quot;: &quot;优化保留双进程和通话（配合mitlite+mipush），切换应用、后台1秒或者锁屏杀了msf和其他进程，强制走mipush&quot;,</span><br><span class="line">&quot;priority&quot;: 2,</span><br><span class="line">&quot;condition&quot;: &quot;frontPkgChanged == true &amp;&amp; from == \&quot;com.tencent.mobileqq\&quot; || screenOff == true&quot;,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot;Thread.sleep(1000);&quot;,</span><br><span class="line">&quot;su.exe(\&quot;ps -ef|grep com.tencent.mobileqq:|grep -v :video|grep -v grep|awk &#x27;&#123;print $2&#125;&#x27;|xargs kill -9\&quot;)&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="7-4-AutoKill-QQMSF"><a href="#7-4-AutoKill-QQMSF" class="headerlink" title="7.4 AutoKill-QQMSF"></a><i id="7-4"></i>7.4 AutoKill-QQMSF</h3><ul>
<li>一代：<ul>
<li><u><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/45019763?shareKey=YTcyMzg0OWM4NjJkNjQ0MjIzMzI~&shareFrom" title="**`原帖`**"><strong><code>原帖</code></strong></a></u></li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;AutoKill-QQMSF&quot;,</span><br><span class="line">&quot;description&quot;: &quot;QQ被切入后台三秒将自动结束MSF服务及其他无用进程，强制QQ使用MiPush或其他系统级推送服务。\n原作者酷安@星澪Star_ZER0 \n修改者酷安@微软Mic&quot;,</span><br><span class="line">&quot;priority&quot;: 2,</span><br><span class="line">&quot;condition&quot;: &quot;frontPkgChanged == true &amp;&amp; from == \&quot;com.tencent.mobileqq\&quot;&quot;,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot;Thread.sleep(3000);&quot;,</span><br><span class="line">&quot;su.exe(\&quot;ps -ef|grep com.tencent.mobileqq:|grep :MSF|grep -v :video|grep -v grep|awk &#x27;&#123;print $2&#125;&#x27;|xargs kill -9\&quot;)&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<ul>
<li>二代<ul>
<li><u><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/45421288?shareKey=ZGJmMmFjMWVmMjBiNjQ0NGU4MGY~&shareUid" title="**`原帖`**"><strong><code>原帖</code></strong></a></u></li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;AutoKill-QQMSF&quot;,</span><br><span class="line">&quot;description&quot;: &quot;QQ被切入后台将自动结束MSF服务\n强制QQ使用MiPush或其他系统级推送\n作者酷安@微软Mic\n当前版本: 0.2&quot;,</span><br><span class="line">&quot;priority&quot;: 1,</span><br><span class="line">&quot;condition&quot;: &quot;frontPkgChanged&quot;,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot;foreach(process : thanos.activityManager.getRunningAppProcessForPackage(from)) &#123; log.log(process.processName); if (process.processName == \&quot;com.tencent.mobileqq\&quot;) &#123; thanos.activityManager.killProcessByName(\&quot;com.tencent.mobileqq:MSF\&quot;);&#125;&#125;&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>


<h3 id="7-5-QQ进程优化双进程"><a href="#7-5-QQ进程优化双进程" class="headerlink" title="7.5 QQ进程优化双进程"></a><i id="7-5"></i>7.5 QQ进程优化双进程</h3><ul>
<li><u><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/35808050?shareKey=ZTczOTFmYWE5Y2ZkNjQ0MzViMWQ~&shareUid=3571197&shareFrom" title="**`原帖`**"><strong><code>原帖</code></strong></a></u></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;QQ进程优化双进程&quot;,</span><br><span class="line">&quot;description&quot;: &quot;从bili离开后 结束多余的进程&quot;,</span><br><span class="line">&quot;priority&quot;: 2,</span><br><span class="line">&quot;condition&quot;: &quot;frontPkgChanged == true &amp;&amp; from == \&quot;com.tencent.mobileqq\&quot;&quot;,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot;Thread.sleep(5000);&quot;,</span><br><span class="line">&quot;su.exe(\&quot;ps -ef|grep com.tencent.mobileqq:|grep -v :MSF|grep -v grep|awk &#x27;&#123;print $2&#125;&#x27;|xargs kill -9\&quot;)&quot;,</span><br><span class="line">&quot;ui.showShortToast(\&quot;😘清理QQ\&quot;)&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="7-6-QQ微信电池优化管理"><a href="#7-6-QQ微信电池优化管理" class="headerlink" title="7.6 QQ微信电池优化管理"></a><i id="7-6"></i>7.6 QQ微信电池优化管理</h3><ul>
<li><u><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/37649574?shareKey=NTVmNGI4YTEzZTg3NjQ0MzVmOTQ~&shareUid=3571197&shareFrom" title="**`原帖`**"><strong><code>原帖</code></strong></a></u></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;QQ微信电池优化管理&quot;,</span><br><span class="line">&quot;description&quot;: &quot;QQ微信电池优化选项，解锁时「优化」，熄屏时「不优化」&quot;,</span><br><span class="line">&quot;priority&quot;: 1,</span><br><span class="line">&quot;condition&quot;:&quot;if(screenOff == true) &#123;Thread.sleep(5000);(su.exe(\&quot;dumpsys deviceidle whitelist +com.tencent.mm\&quot;));(su.exe(\&quot;dumpsys deviceidle whitelist +com.tencent.mobileqq\&quot;))&#125; else if (userPresent == true) &#123;Thread.sleep(2000);(su.exe(\&quot;dumpsys deviceidle whitelist -com.tencent.mm\&quot;));(su.exe(\&quot;dumpsys deviceidle whitelist -com.tencent.mobileqq\&quot;))&#125;&quot;,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot;&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>


<h2 id="8-充电"><a href="#8-充电" class="headerlink" title="8. 充电"></a><i id="8"></i>8. 充电</h2><h3 id="8-1-充电控制-无效"><a href="#8-1-充电控制-无效" class="headerlink" title="8.1 充电控制(无效)"></a><i id="8-1"></i>8.1 充电控制(<strong>无效</strong>)</h3><ul>
<li>充电恢复</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;充电恢复&quot;,</span><br><span class="line">&quot;description&quot;: &quot;电量低至85，恢复充电&quot;,</span><br><span class="line">&quot;priority&quot;: 1,</span><br><span class="line">&quot;condition&quot;: &quot;batteryChanged == true &amp;&amp; batteryLevel == 85 &amp;&amp; isCharging == false &quot;,</span><br><span class="line">&quot;actions&quot;: [ &quot;su.exe(\&quot;echo 0 &gt; /sys/class/power_supply/battery/input_suspend\&quot;);&quot;,</span><br><span class="line">&quot;ui.showShortToast(\&quot;充电已恢复\&quot;);&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<ul>
<li>充电停止<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;充电停止&quot;,</span><br><span class="line">&quot;description&quot;: &quot;电量达到90后，延时10秒，停止充电&quot;,</span><br><span class="line">&quot;priority&quot;: 1,</span><br><span class="line">&quot;delay&quot;:10000,</span><br><span class="line">&quot;condition&quot;: &quot;isCharging==true &amp;&amp; batteryChanged == true &amp;&amp; batteryLevel == 90&quot;,</span><br><span class="line">&quot;actions&quot;: [ &quot;su.exe(\&quot;echo 1 &gt; /sys/class/power_supply/battery/input_suspend\&quot;);&quot;,</span><br><span class="line">&quot;ui.showShortToast(\&quot;充电已停止\&quot;);&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="8-2-充电停止"><a href="#8-2-充电停止" class="headerlink" title="8.2. 充电停止"></a><i id="8-2"></i>8.2. 充电停止</h3><blockquote>
<p>下面两种充电停止自己选一个就行<br>来自酷友提供</p>
</blockquote>
<ul>
<li>充电90停止</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;充电停止&quot;,</span><br><span class="line">&quot;description&quot;: &quot;电量达到90后，延时30秒，停止充电&quot;,</span><br><span class="line">&quot;priority&quot;: 1,</span><br><span class="line">&quot;delay&quot;:30000,</span><br><span class="line">&quot;condition&quot;: &quot;isCharging==true &amp;&amp; batteryChanged == true &amp;&amp; batteryLevel == 90&quot;,</span><br><span class="line">&quot;actions&quot;: [ &quot;su.exe(\&quot;echo 1 &gt; /sys/class/power_supply/battery/input_suspend\&quot;);&quot;,</span><br><span class="line">&quot;ui.showShortToast(\&quot;充电已停止\&quot;);&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<ul>
<li>充电100停止</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;充电停止&quot;,</span><br><span class="line">&quot;description&quot;: &quot;电量达到100，60秒后停止充电&quot;,</span><br><span class="line">&quot;priority&quot;: 1,</span><br><span class="line">&quot;delay&quot;:60000,</span><br><span class="line">&quot;condition&quot;: &quot;isCharging==true &amp;&amp; batteryChanged == true &amp;&amp; batteryLevel == 100&quot;,</span><br><span class="line">&quot;actions&quot;: [ &quot;su.exe(\&quot;echo 1 &gt; /sys/class/power_supply/battery/input_suspend\&quot;);&quot;,</span><br><span class="line">&quot;ui.showNotification(\&quot;充电\&quot;,\&quot;已停止充电\&quot;,\&quot;当前电量为：\&quot; + batteryLevel + \&quot;，现在开始，随时都可以拔电啦！\&quot;,false)&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>


<h2 id="9-NFC-蓝牙"><a href="#9-NFC-蓝牙" class="headerlink" title="9. NFC&#x2F;蓝牙"></a><i id="9"></i>9. NFC&#x2F;蓝牙</h2><h3 id="9-1-自动开关NFC"><a href="#9-1-自动开关NFC" class="headerlink" title="9.1 自动开关NFC"></a><i id="9-1"></i>9.1 自动开关NFC</h3><ul>
<li><u><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/20776215?shareKey=NmZkM2NhN2VhZGJjNjQ0MjJiNTU~&shareUid=3571197&shareFrom" title="**`原帖`**"><strong><code>原帖</code></strong></a></u></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;自动开关NFC&quot;,</span><br><span class="line">&quot;description&quot;: &quot;打开应用开NFC，关闭应用关NFC。应用名单来自全局变量nfc。酷安@幻觉&quot;,</span><br><span class="line">&quot;priority&quot;: 2,</span><br><span class="line">&quot;condition&quot;: &quot;if( hw.isNfcEnabled() == false &amp;&amp; frontPkgChanged == true &amp;&amp; globalVarOf$nfc.contains(to)) &#123; hw.enableNfc() &#125; else if ( hw.isNfcEnabled() == true &amp;&amp; pkgKilled == true &amp;&amp; globalVarOf$nfc.contains(pkgName)) &#123; hw.disableNfc() &#125;&quot;,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot;&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="9-2-自动开关蓝牙"><a href="#9-2-自动开关蓝牙" class="headerlink" title="9.2 自动开关蓝牙"></a><i id="9-2"></i>9.2 自动开关蓝牙</h3><ul>
<li><u><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/20061143?shareKey=OTM1OGI3MmVmNzUxNjQ0MjJlOTU~&shareUid=3571197&shareFrom" title="**`原帖`**"><strong><code>原帖</code></strong></a></u></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;自动开关蓝牙&quot;,</span><br><span class="line">&quot;description&quot;: &quot;使用了全局变量bt。酷安@幻觉&quot;,</span><br><span class="line">&quot;priority&quot;: 2,</span><br><span class="line">&quot;condition&quot;: &quot;if(frontPkgChanged == true &amp;&amp; globalVarOf$bt.contains(to)) &#123; (hw.enableBT() ?) &#125; else if ( pkgKilled == true &amp;&amp; globalVarOf$bt.contains(pkgName)) &#123; (hw.disableBT() ?) &#125;&quot;,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot;&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="9-3-蓝牙断开自动关闭"><a href="#9-3-蓝牙断开自动关闭" class="headerlink" title="9.3 蓝牙断开自动关闭"></a><i id="9-3"></i>9.3 蓝牙断开自动关闭</h3><ul>
<li><u><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/45338524?shareKey=MzA4ZTQ5ZDdmMWI0NjQ0MzRkZjU~&shareUid=3571197&shareFrom" title="原帖"><strong><code>原帖</code></strong></a></u></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;蓝牙断开自动关闭&quot;,</span><br><span class="line">&quot;description&quot;: &quot;蓝牙连接断开，自动关闭蓝牙&quot;,</span><br><span class="line">&quot;priority&quot;: 2,</span><br><span class="line">&quot;condition&quot;:&quot;btConnectionStateChanged == true &amp;&amp; btConnectionStateDisconnected == true&quot;,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot;ui.showShortToast(\&quot;蓝牙关闭\&quot; + (hw. disableBT() ? \&quot;成功\&quot; : \&quot;失败\&quot;));&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>


<h2 id="10-核心控制"><a href="#10-核心控制" class="headerlink" title="10. 核心控制"></a><i id="10"></i>10. 核心控制</h2><h3 id="10-1-亮-息屏开关核心"><a href="#10-1-亮-息屏开关核心" class="headerlink" title="10.1 亮&#x2F;息屏开关核心"></a><i id="10-1"></i>10.1 亮&#x2F;息屏开关核心</h3><ul>
<li><u><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/30684555?shareKey=NDM0MjdhYzI4YjQ4NjQ0MzVjMjM~&shareUid=3571197&shareFrom" title="原帖"><strong><code>原帖</code></strong></a></u></li>
<li>息屏关核</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;屏幕熄灭关闭核心&quot;,</span><br><span class="line">&quot;description&quot;: &quot;当屏幕被熄灭时，关闭核心&quot;,</span><br><span class="line">&quot;priority&quot;: 1,</span><br><span class="line">&quot;condition&quot;: &quot;screenOff == true&quot;,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot;su.exe(\&quot;echo 0 &gt; /sys/devices/system/cpu/cpu2/online&amp;&amp;echo 0 &gt; /sys/devices/system/cpu/cpu3/online&amp;&amp;echo 0 &gt; /sys/devices/system/cpu/cpu1/online&amp;&amp;echo 0 &gt; /sys/devices/system/cpu/cpu5/online&amp;&amp;echo 0 &gt; /sys/devices/system/cpu/cpu6/online&amp;&amp;echo 0 &gt; /sys/devices/system/cpu/cpu7/online\&quot;)&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<ul>
<li>亮屏开核</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;屏幕点亮打开核心&quot;,</span><br><span class="line">&quot;description&quot;: &quot;当屏幕被点亮时，打开被关闭的核心&quot;,</span><br><span class="line">&quot;priority&quot;: 1,</span><br><span class="line">&quot;condition&quot;: &quot;screenOn == true&quot;,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot;su.exe(\&quot;echo 1 &gt; /sys/devices/system/cpu/cpu2/online&amp;&amp;echo 1 &gt; /sys/devices/system/cpu/cpu3/online&amp;&amp;echo 1 &gt; /sys/devices/system/cpu/cpu1/online&amp;&amp;echo 1 &gt; /sys/devices/system/cpu/cpu5/online&amp;&amp;echo 1 &gt; /sys/devices/system/cpu/cpu6/online&amp;&amp;echo 1 &gt; /sys/devices/system/cpu/cpu7/online\&quot;)&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="10-2-吃大核锁小核"><a href="#10-2-吃大核锁小核" class="headerlink" title="10.2 吃大核锁小核"></a><i id="10-2"></i>10.2 吃大核锁小核</h3><ul>
<li>注意事项：<blockquote>
<ol>
<li>该情景模式来自酷友投稿</li>
<li>全局变量：background<ul>
<li>把需要的软件加进去</li>
</ul>
</li>
<li>适用情景：有的app，用起来的电流超级高，可以给它分配小核，这样使用可能有点卡，但是相对省电很多（也要分情况看什么app,有的只用小核，反而耗电量会增加）</li>
<li>其中，框住的地方就是你【线程分配.sh】的路径，可以自定义<br><a target="_blank" rel="noopener" href="https://bzmshang.top/content/uploadfile/202304/50711682307838.jpg"><img src="https://bzmshang.top/content/uploadfile/202304/50711682307838.jpg"></a></li>
<li>你可以修改boost background改成boost audio-app，进程就分配成audio-app的cpu了<ul>
<li>cpuset有top-app、background、foreground、restricted、system-background、audio-app等<br><a target="_blank" rel="noopener" href="https://bzmshang.top/content/uploadfile/202304/ebda1682308150.jpg"><img src="https://bzmshang.top/content/uploadfile/202304/ebda1682308150.jpg"></a></li>
</ul>
</li>
<li>当你在全局变量添加的包名后，比如你添加了微信，那么你打开微信后，过了5秒后，就会变成你想要的background了。你可以把scene开启小窗模式，然后查看微信进程的cpuset。一般前台应用的命令行是&#x2F;foreground，如果成功，&#x2F;foreground会变成你想要的模式</li>
</ol>
</blockquote>
</li>
</ul>
<ol>
<li>首先创建一个【线程分配.sh】,文件内容如下：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function boost()</span><br><span class="line">&#123;</span><br><span class="line">sleep 4</span><br><span class="line">chmod -R 777 /dev/cpuset</span><br><span class="line">pgrep -f $2 | while read pid; do</span><br><span class="line">#echo $pid &gt; /dev/cpuset/$1/tasks</span><br><span class="line">echo $pid &gt; /dev/cpuset/$1/cgroup.procs</span><br><span class="line">done</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>Thannox中创建情景模式，内容如下：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;cpuset变成background&quot;,</span><br><span class="line">&quot;description&quot;: &quot;打开程序时，变成background，分配cpu1-3&quot;,</span><br><span class="line">&quot;priority&quot;: 2,</span><br><span class="line">&quot;condition&quot;: &quot;frontPkgChanged == true &amp;&amp; globalVarOf$background.contains(to)&quot;,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot;su.exe(\&quot;source /storage/emulated/0/Android/线程分配.sh&amp;&amp;boost background \&quot; +to);&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h2 id="11-通知"><a href="#11-通知" class="headerlink" title="11. 通知"></a><i id="11"></i>11. 通知</h2><h3 id="11-1-弹幕通知"><a href="#11-1-弹幕通知" class="headerlink" title="11.1 弹幕通知"></a><i id="11-1"></i>11.1 弹幕通知</h3><ul>
<li>全局变量：danmu_app</li>
<li>在变量里面的软件才会进行弹幕通知</li>
<li>来自酷友提供</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    &quot;name&quot;: &quot;弹幕通知V2(danmu_app)&quot;,</span><br><span class="line">    &quot;description&quot;: &quot;在全局danmu_app里面的包,收到通知时用弹幕展示&quot;,</span><br><span class="line">    &quot;priority&quot;: 1,</span><br><span class="line">    &quot;condition&quot;:</span><br><span class="line">&quot;thanos.profileManager.isGlobalRuleVarByNameExists(\&quot;danmu_app\&quot;) ==false||(notificationAdded &amp;&amp; !notification.isForegroundService &amp;&amp; pkgName != \&quot;android\&quot;&amp;&amp;globalVarOf$danmu_app.contains(pkgName))&quot;,</span><br><span class="line">    &quot;actions&quot;: [</span><br><span class="line">&quot;if(thanos.profileManager.isGlobalRuleVarByNameExists(\&quot;danmu_app\&quot;) == false)&#123;thanos.profileManager.addGlobalRuleVar(\&quot;danmu_app\&quot;,&#123;\&quot;com.tencent.mm\&quot;,\&quot;com.tencent.mobileqq\&quot;,\&quot;com.coolapk.market\&quot;&#125;);ui.showDanmu(\&quot;app://\&quot; + \&quot;github.tornaco.android.thanos\&quot;,\&quot;创建danmu_app成功\&quot;);su.exe(\&quot;if [ ! -f /data/message.sh ];then touch /data/message.sh;echo &#x27;xx=`cat /data/message.txt`;echo $&#123;xx#*:&#125; &gt; /data/message.txt&#x27; &gt; /data/message.sh;fi;if [ ! -f /data/message.txt ];then touch /data/message.txt;fi\&quot;)&#125;&quot;,</span><br><span class="line">&quot;if(thanos.profileManager.isGlobalRuleVarByNameExists(\&quot;danmu_app\&quot;) == true)&#123;su.exe(\&quot;echo \&quot;+notificationContent+\&quot; &gt; /data/message.txt\&quot;);p=su.exe(\&quot;echo \&quot;+notificationContent).out[0];su.exe(\&quot;sh /data/message.sh\&quot;);a=su.exe(\&quot;cat /data/message.txt\&quot;).out[0];if(a!=\&quot;\&quot;)&#123;count=su.exe(\&quot;echo \&quot;+notificationContent+\&quot;|cut -d &#x27;[&#x27; -f2|cut -d &#x27;]&#x27; -f1\&quot;).out[0];if(count!=\&quot;\&quot;&amp;&amp;(pkgName==\&quot;com.tencent.mm\&quot;)&amp;&amp;count!=a&amp;&amp;count!=p)&#123;count=\&quot;(\&quot;+count+\&quot;新消息)\&quot;&#125;else &#123;count=\&quot;\&quot;&#125;;ui.showDanmu(\&quot;app://\&quot; +pkgName,notificationTitle+count+\&quot;: \&quot;+a)&#125;else&#123;p=su.exe(\&quot;echo \&quot;+notificationContent).out[0];b=su.exe(\&quot;echo \&quot;+notificationContent+\&quot; &gt; /data/message.txt\&quot;).out[0];su.exe(\&quot;echo \&quot;+b+\&quot;&gt; /data/message.txt \&quot;);su.exe(\&quot;sh /data/message.sh\&quot;);a=su.exe(\&quot;cat /data/message.txt\&quot;).out[0];count=su.exe(\&quot;echo \&quot;+b+\&quot; |cut -d &#x27;[&#x27; -f2|cut -d &#x27;]&#x27; -f1\&quot;).out[0];if(count!=\&quot;\&quot;&amp;&amp;(pkgName==\&quot;com.tencent.mm\&quot;)&amp;&amp;count!=a&amp;&amp;count!=p)&#123;count=\&quot;(\&quot;+count+\&quot;新消息)\&quot;&#125;else &#123;count=\&quot;\&quot;&#125;;if(pkgName==\&quot;com.tencent.mobileqq\&quot;)&#123;q=\&quot;\&quot;&#125;;ui.showDanmu(\&quot;app://\&quot; +pkgName,notificationTitle+count+\&quot;: \&quot;+a+\&quot;...[多行]\&quot;)&#125;&#125;&quot;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="11-2-弹幕通知"><a href="#11-2-弹幕通知" class="headerlink" title="11.2 弹幕通知"></a><i id="11-2"></i>11.2 弹幕通知</h3><ul>
<li><u><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/51054436?shareKey=ODJmNTJjOWZiYWQ0NjU0ZjNiM2Y~&shareUid=3571197&shareFrom" title="原帖"><strong><code>原帖</code></strong></a></u></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;弹幕通知&quot;,</span><br><span class="line">&quot;description&quot;: &quot;收到通知或通知更新时时用弹幕展示;设置全局变量danmuapps，添加需要弹幕显示其通知的应用包名;设置全局变量gameapps，添加当该应用在前台不显示弹幕的应用包名;&quot;,</span><br><span class="line">&quot;priority&quot;: 1,</span><br><span class="line">&quot;condition&quot;: &quot;(notificationRemoved == false &amp;&amp; (notificationAdded || notificationUpdated)) &amp;&amp; !notification.isForegroundService &amp;&amp; pkgName != \&quot;android\&quot; &amp;&amp; globalVarOf$danmuapps.contains(pkgName)&amp;&amp;(! globalVarOf$gameApps.contains(activity.getFrontAppPackage()))&quot;,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot;ui.showDanmu(\&quot;app://\&quot; + pkgName,thanos.pkgManager.getAppInfo(pkgName).appLabel + \&quot; :\&quot; + notificationTitle + \&quot;:\&quot; + notificationContent);&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h2 id="12-Google"><a href="#12-Google" class="headerlink" title="12. Google"></a><i id="12"></i>12. Google</h2><h3 id="12-1-开启谷歌系软件，解冻谷歌服务和框架"><a href="#12-1-开启谷歌系软件，解冻谷歌服务和框架" class="headerlink" title="12.1 开启谷歌系软件，解冻谷歌服务和框架"></a><i id="12-1"></i>12.1 开启谷歌系软件，解冻谷歌服务和框架</h3><ul>
<li><p><u><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/33693395?shareKey=Y2FjYjNiYTYyMTM0NjQ0OTFjMDE~&shareUid=2521387&shareFrom" title="原帖"><strong><code>原帖</code></strong></a></u></p>
</li>
<li><p>如果需要自己添加启动某个应用时解冻只要在||to &#x3D;&#x3D; &quot;com.google.android.youtube&quot;后面再加||to &#x3D;&#x3D; &quot;xxx应用的包名&quot;就行</p>
</li>
<li><p>谷歌冻结</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;谷歌冻结 &quot;,</span><br><span class="line">&quot;description&quot;: &quot;冻结gp服务&quot;,</span><br><span class="line">&quot;priority&quot;: 1,</span><br><span class="line">&quot;condition&quot;: &quot;pkgKilled == true &amp;&amp;( pkgName == \&quot;com.android.vending\&quot;||pkgName == \&quot;com.google.android.youtube\&quot;)&quot;,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot;pkg.disableApplication(\&quot;com.google.android.gms\&quot;)&quot;,&quot;pkg.disableApplication(\&quot;com.google.android.gsf\&quot;)&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<ul>
<li>谷歌解冻</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;谷歌解冻 &quot;,</span><br><span class="line">&quot;description&quot;: &quot;解冻gp服务&quot;,</span><br><span class="line">&quot;priority&quot;: 1,</span><br><span class="line">&quot;condition&quot;: &quot;frontPkgChanged == true &amp;&amp;( to == \&quot;com.android.vending\&quot;||to == \&quot;com.google.android.youtube\&quot;)&quot;,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot;pkg.enableApplication(\&quot;com.google.android.gms\&quot;)&quot;,&quot;pkg.enableApplication(\&quot;com.google.android.gsf\&quot;)&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h3 id="12-2-开启谷歌系软件，解冻谷歌服务和框架进阶版"><a href="#12-2-开启谷歌系软件，解冻谷歌服务和框架进阶版" class="headerlink" title="12.2 开启谷歌系软件，解冻谷歌服务和框架进阶版"></a><i id="12-2"></i>12.2 开启谷歌系软件，解冻谷歌服务和框架进阶版</h3><ul>
<li>全局变量：Google</li>
<li>全局变量里面选择谷歌系软件，当打开那个软件时，解冻谷歌服务<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;解冻谷歌服务和框架&quot;,</span><br><span class="line">&quot;description&quot;: &quot;全局变量Google&quot;,</span><br><span class="line">&quot;priority&quot;: 1,</span><br><span class="line">&quot;condition&quot;: &quot;frontPkgChanged == true &amp;&amp;globalVarOf$Google.contains(to)&quot;,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot;pkg.enableApplication(\&quot;com.google.android.gms\&quot;)&quot;,</span><br><span class="line">&quot;pkg.enableApplication(\&quot;com.google.android.gsf\&quot;)&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="13-电池"><a href="#13-电池" class="headerlink" title="13. 电池"></a><i id="13"></i>13. 电池</h2><h3 id="13-1-电池白名单"><a href="#13-1-电池白名单" class="headerlink" title="13.1 电池白名单"></a><i id="13-1"></i>13.1 电池白名单</h3><ul>
<li><u><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/44585473?shareKey=ODc3MmQ5MDFmYzIyNjQ0OTFmMzE~&shareUid=3571197&shareFrom" title="原帖"><strong><code>原帖</code></strong></a></u></li>
<li>MIUI系统在重启或者某些情况下，电池优化白名单中的企鹅等流氓等应用会被恢复。每次启动或熄屏自动删除电池优化白名单，重新设置为自己的，使MIUI无机会恢复厂家设置的流氓名单：来自Jinamin</li>
<li>全局变量：PowerWhiteList 添加你想要保后台的应用</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;电池优化白名单&quot;,</span><br><span class="line">&quot;description&quot;: &quot;开机或灭屏设置电池优化白名单，全局变量PowerWhiteList&quot;,</span><br><span class="line">&quot;priority&quot;: 1,</span><br><span class="line">&quot;condition&quot;: &quot;systemReady == true || screenOff == true&quot;,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot;su.exe(\&quot;for i in `dumpsys deviceidle whitelist | cut -d &#x27;,&#x27; -f 2 `;do dumpsys deviceidle whitelist -$i; done \&quot;)&quot;,</span><br><span class="line">&quot;for (String p : globalVarOf$PowerWhiteList) &#123;su.exe(\&quot;dumpsys deviceidle whitelist +\&quot; +p)&#125;&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h2 id="14-到点执行"><a href="#14-到点执行" class="headerlink" title="14. 到点执行"></a><i id="14"></i>14. 到点执行</h2><h3 id="14-1-到点重启"><a href="#14-1-到点重启" class="headerlink" title="14.1 到点重启"></a><i id="14-1"></i>14.1 到点重启</h3><ul>
<li>作者：诗里沧海怨怼</li>
<li>全局变量：timedApp</li>
<li>缺点：手机打盹得时候，可能不会执行，最好把时间设置到睡觉时间之外得其它时间，或者你能让打盹不影响灭霸也行</li>
<li>使用方法：<blockquote>
<ol>
<li>将该情景模式使用JSON粘贴好后，设置好全局变量及应用</li>
<li>选择右上角的三个点，找到引擎，选择时间与日期</li>
<li>左下角是定时时间，右下角是间隔时间，Tag写tmieKill，至于时间随你自己选了<ul>
<li>定时时间想要设置多个，就需要改情景模式，将【”condition”: “timeTick&amp;&amp;tag&#x3D;&#x3D;’timeKill’”,】改成【”condition”: “timeTick&amp;&amp;(tag&#x3D;&#x3D;’timeKill1’ || tag&#x3D;&#x3D;’timeKill2’)”,】如果还想要更多定时时间，则将右小括号前继续增加【 || tag&#x3D;&#x3D;’timeKill？’】其中问好就是代表数字，自己往后加就行了，【||前有个空格，不要遗漏】</li>
<li>间隔时间就不需要改情景模式，直接在Tag写tmieKill就行</li>
</ul>
</li>
</ol>
</blockquote>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;name&quot;: &quot;到点重启&quot;,</span><br><span class="line">        &quot;description&quot;: &quot;by诗里沧海怨怼&quot;,</span><br><span class="line">        &quot;priority&quot;: -1,</span><br><span class="line">        &quot;condition&quot;: &quot;timeTick&amp;&amp;tag==&#x27;timeKill&#x27;&quot;,</span><br><span class="line">        &quot;actions&quot;:[&quot;aMan=thanos.activityManager;for(app:globalVarOf$timedApp)&#123;if(aMan.isPackageRunning(app)&amp;&amp;!activity.frontAppPackage.equals(app))&#123;aMan.forceStopPackage(app);&#125;&#125;Thread.sleep(5000);ui.showShortToast(&#x27;到点重启&#x27;);for(app:globalVarOf$timedApp)&#123;if(!aMan.isPackageRunning(app))&#123;activity.launchProcessForPackage(app);&#125;&#125;&quot;]</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="14-2-到点杀死"><a href="#14-2-到点杀死" class="headerlink" title="14.2 到点杀死"></a><i id="14-2"></i>14.2 到点杀死</h3><ul>
<li>作者：诗里沧海怨怼</li>
<li>全局变量：timedApp</li>
<li>缺点：手机打盹得时候，可能不会执行，最好把时间设置到睡觉时间之外得其它时间，或者你能让打盹不影响灭霸也行</li>
<li>使用方法：<blockquote>
<ol>
<li>将该情景模式使用JSON粘贴好后，设置好全局变量及应用</li>
<li>选择右上角的三个点，找到引擎，选择时间与日期</li>
<li>左下角是定时时间，右下角是间隔时间，Tag写tmieKill，至于时间随你自己选了<ul>
<li>定时时间想要设置多个，就需要改情景模式，将【”condition”: “timeTick&amp;&amp;tag&#x3D;&#x3D;’timeKill’”,】改成【”condition”: “timeTick&amp;&amp;(tag&#x3D;&#x3D;’timeKill1’ || tag&#x3D;&#x3D;’timeKill2’)”,】如果还想要更多定时时间，则将右小括号前继续增加【 || tag&#x3D;&#x3D;’timeKill？’】其中问好就是代表数字，自己往后加就行了，【||前有个空格，不要遗漏】</li>
<li>间隔时间就不需要改情景模式，直接在Tag写tmieKill就行</li>
</ul>
</li>
</ol>
</blockquote>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;name&quot;: &quot;到点杀死&quot;,</span><br><span class="line">        &quot;description&quot;: &quot;by诗里沧海怨怼&quot;,</span><br><span class="line">        &quot;priority&quot;: 1,</span><br><span class="line">        &quot;condition&quot;: &quot;timeTick&amp;&amp;tag==&#x27;timeKill&#x27;&quot;,</span><br><span class="line">        &quot;actions&quot;:[&quot;aMan=thanos.activityManager;for(app:globalVarOf$timedApp)&#123;if(aMan.isPackageRunning(app)&amp;&amp;!activity.frontAppPackage.equals(app))&#123;aMan.forceStopPackage(app);&#125;&#125;ui.showShortToast(&#x27;到点杀死&#x27;);&quot;]</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h2 id="15-冻结"><a href="#15-冻结" class="headerlink" title="15. 冻结"></a><i id="15"></i>15. 冻结</h2><h3 id="15-1-智能冻结"><a href="#15-1-智能冻结" class="headerlink" title="15.1 智能冻结"></a><i id="15-1"></i>15.1 智能冻结</h3><ul>
<li><u><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/45832695?shareKey=MTY5NTcyYmNlOWFjNjQ1ODkxOGI~&shareUid=2929582&shareFrom" title="**`原帖`**"><strong><code>原帖</code></strong></a></u></li>
<li>智能冻结，thanox提供有两种冻结方式，如果使用PM suspend方式冻结，对于流氓软件，虽然图标变成了灰色，但其组件仍然在后台运行。所以针对这类软件，我的方法仍是情景模式，直接使用pm disable 甚至叠加pm hide的方式冻结。注意！情景模式冻结应用不能并列在智能冻结列表，冻结的应用要启动可以thanox设置该应用智能触冻，桌面启动图标可以用快挗方式软件设置快挗方式。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;返回桌面停用&quot;,</span><br><span class="line">&quot;description&quot;: &quot;返回桌面停用全局变量DS列表中的应用&quot;,</span><br><span class="line">&quot;priority&quot;: 2,</span><br><span class="line">&quot;condition&quot;: &quot;frontPkgChanged == true &amp;&amp; globalVarOf$HomeApp.contains(to) || screenOff == true&quot;,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot;for (String d : globalVarOf$DS)&#123;if(pkg.isApplicationEnabled(d))&#123;killer.killPackage(d);su.exe(\&quot;pm disable \&quot; + d);ui.showShortToast(\&quot;❄️\&quot; + thanos.pkgManager.getAppInfo(d).appLabel +\&quot;⭕\&quot;);&#125;&#125;&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h2 id="16-屏幕"><a href="#16-屏幕" class="headerlink" title="16. 屏幕"></a><i id="16"></i>16. 屏幕</h2><h2 id="16-1-开关屏日志"><a href="#16-1-开关屏日志" class="headerlink" title="16.1 开关屏日志"></a><i id="16-1"></i>16.1 开关屏日志</h2><ul>
<li><u><a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/39045897?shareKey=NzQ1YTJkMWQwZTk2NjRjNjNjZTM~&shareUid=3119350&shareFrom" title="**`原帖`**"><strong><code>原帖</code></strong></a></u></li>
<li>开关屏日志，该情景模式记录你开屏和关屏的时间到日志里，这样你可以更直观的知道应用是在亮屏时候杀死的还是灭屏后杀死的。日志文件路径”&#x2F;data&#x2F;system&#x2F;thanos_ynokiMHEVHZWWdDH&#x2F;profile_user_io&#x2F;kill&#x2F;killLog.txt”，打开日志文件即可查看。代码如下，请用情景模式json编写。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;</span><br><span class="line">&quot;name&quot;: &quot;开关屏日志&quot;,</span><br><span class="line">&quot;description&quot;: &quot;冻结对象来自dongjie变量&quot;,</span><br><span class="line">&quot;priority&quot;: 1,</span><br><span class="line">&quot;condition&quot;: &quot;if(screenOff == true)&#123;io.writeAppend(\&quot;kill/killLog.txt\&quot;,\&quot;手机在此时间关屏:\&quot;+ new java.util.Date() +\&quot;\\r\&quot;)&#125;else if(screenOn== true || userPresent == true)&#123;io.writeAppend(\&quot;kill/killLog.txt\&quot;,\&quot;手机在此时间打开屏幕:\&quot;+ new java.util.Date() +\&quot;\\r\&quot;)&#125;&quot;,</span><br><span class="line">&quot;actions&quot;: [</span><br><span class="line">&quot;&quot;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>


<h2 id="17-管家流"><a href="#17-管家流" class="headerlink" title="17. 管家流"></a><i id="17"></i>17. 管家流</h2><h3 id="17-1-多后台管家"><a href="#17-1-多后台管家" class="headerlink" title="17.1 多后台管家"></a><i id="17-1"></i>17.1 多后台管家</h3><p>群里有教程</p>
<details>
<summary>点击查看</summary>
加群获取最新：528265424
<br>答案:诗里沧海怨怼
</details>

<h1 id="墓碑"><a href="#墓碑" class="headerlink" title="墓碑"></a><i id="墓碑"></i>墓碑</h1><ul>
<li>通用须知<blockquote>
<ol>
<li>墓碑情景需搭配<u><a target="_blank" rel="noopener" href="https://github.com/myflavor/NoANR" title="NoANR"><strong><code>NoANR</code></strong></a></u>使用，墓碑情景需打开灭霸 <strong>SU开关</strong></li>
<li>以下墓碑皆来自 作者：aa 所优化作者：myflavor 所写的<u><a target="_blank" rel="noopener" href="https://www.myflv.cn/other/281.html" title="墓碑情景模式"><strong><code>墓碑情景模式</code></strong></a></u></li>
<li>BUG未知，自测</li>
</ol>
</blockquote>
</li>
</ul>
<h2 id="1-乖巧名单版"><a href="#1-乖巧名单版" class="headerlink" title="1. 乖巧名单版"></a><i id="乖巧名单版"></i>1. 乖巧名单版</h2><ul>
<li>注意事项<blockquote>
<ol>
<li>刷入下方的冻结和解冻</li>
<li>关闭Thanox乖巧模式总开关</li>
<li>开启下方单独应用的乖巧开关</li>
<li>开启乖巧的应用就会对该应用进行墓碑</li>
<li>该情景模式需要2条，一条冻结，一条解冻(Color的冻结刷优化版)</li>
<li>1-1只能二选一</li>
</ol>
</blockquote>
</li>
</ul>
<h3 id="1-1-1-冻结"><a href="#1-1-1-冻结" class="headerlink" title="1-1(1). 冻结"></a><i id="冻结"></i>1-1(1). 冻结</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;name&quot;: &quot;NoActive(音频版)冻结&quot;,</span><br><span class="line">        &quot;description&quot;: &quot;应用进入后台冻结进程,白名单为全局变量whiteApps&quot;,</span><br><span class="line">        &quot;priority&quot;: 1,</span><br><span class="line">        &quot;delay&quot;: 700,</span><br><span class="line">        &quot;condition&quot;: &quot;frontPkgChanged &amp;&amp; thanos.getActivityManager().isPkgSmartStandByEnabled(from)&amp;&amp; !globalVarOf$whiteApps.contains(from)&quot;,</span><br><span class="line">        &quot;actions&quot;: [ &quot;if(thanos.getAudioManager().hasAudioFocus(from))&#123;su.exe(\&quot;dumpsys deviceidle whitelist +\&quot;+from)&#125;else&#123;su.exe(\&quot;dumpsys deviceidle whitelist\&quot;+from);if(activity.getFrontAppPackage()!=from &amp;&amp; !thanos.windowManager.hasVisibleWindows(from) &amp;&amp;!thanos.getActivityManager().hasTopVisibleActivities(from))&#123;activity.setInactive(from);su.exe(\&quot;appops set \&quot; + from + \&quot; WAKE_LOCK ignore\&quot;);su.exe(\&quot;killSTOP `pgrepf \&quot;+ from +\&quot;`\&quot;)&#125;;&#125; ;&quot;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="1-1-2-冻结-Color优化版"><a href="#1-1-2-冻结-Color优化版" class="headerlink" title="1-1(2). 冻结(Color优化版)"></a><i id="冻结(Color优化版)"></i>1-1(2). 冻结(Color优化版)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;name&quot;: &quot;NoActive(全局变量白名单)冻结&quot;,</span><br><span class="line">        &quot;description&quot;: &quot;应用进入后台冻结进程,白名单为全局变量whiteApps&quot;,</span><br><span class="line">        &quot;priority&quot;:1,</span><br><span class="line">        &quot;delay&quot;:700,</span><br><span class="line">        &quot;condition&quot;: &quot;frontPkgChanged &amp;&amp; thanos.getActivityManager().isPkgSmartStandByEnabled(from)&amp;&amp; !globalVarOf$whiteApps.contains(from)&quot;,</span><br><span class="line">        &quot;actions&quot;: [</span><br><span class="line">            &quot;if(thanos.getAudioManager().hasAudioFocus(from))&#123;su.exe(\&quot;dumpsys deviceidle whitelist +\&quot;+from)&#125;else&#123;su.exe(\&quot;dumpsys deviceidle whitelist\&quot;+from);if(activity.getFrontAppPackage()!=from &amp;&amp; !thanos.windowManager.hasVisibleWindows(from) &amp;&amp;!thanos.getActivityManager().hasTopVisibleActivities(from))&#123;activity.setInactive(from);su.exe(\&quot;appops set \&quot; + from + \&quot; WAKE_LOCK ignore\&quot;);su.exe(\&quot;psef|grep \&quot;+ from +\&quot;|grepv grep|awk &#x27;&#123;print $2&#125;&#x27;|xargs kill19\&quot;)&#125;;&#125; ;&quot;</span><br><span class="line">                ]</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="1-2-解冻"><a href="#1-2-解冻" class="headerlink" title="1-2. 解冻"></a><i id="解冻"></i>1-2. 解冻</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;name&quot;: &quot;NoActive解冻&quot;,</span><br><span class="line">        &quot;description&quot;: &quot;解冻被冻结进程&quot;,</span><br><span class="line">        &quot;priority&quot;:1,</span><br><span class="line">        &quot;condition&quot;: &quot;frontPkgChanged &amp;&amp; thanos.getActivityManager().isPkgSmartStandByEnabled(to)&amp;&amp;!globalVarOf$whiteApps.contains(to)&quot;,</span><br><span class="line">        &quot;actions&quot;: [ &quot;su.exe(\&quot;appops set \&quot; +to + \&quot; WAKE_LOCK default\&quot;);&quot;,&quot;su.exe(\&quot;killCONT `pgrepf \&quot;+ to + \&quot;`\&quot;);&quot;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h2 id="2-黑名单版"><a href="#2-黑名单版" class="headerlink" title="2. 黑名单版"></a><i id="黑名单版"></i>2. 黑名单版</h2><ul>
<li>注意事项<blockquote>
<ol>
<li>黑名单为乖巧名单但乖巧总开关可不开</li>
<li>全局变量为：blackapps</li>
<li>黑名单应用需关闭应用 “唤醒锁(Thanox的唤醒锁拦截)”，否则概率性息屏无法休眠</li>
<li>该情景模式只有1条</li>
</ol>
</blockquote>
</li>
</ul>
<h3 id="2-1墓碑۩-主情景-黑名单版"><a href="#2-1墓碑۩-主情景-黑名单版" class="headerlink" title="2-1墓碑۩(主情景)黑名单版"></a><i id="墓碑۩(主情景)黑名单版"></i>2-1墓碑۩(主情景)黑名单版</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;name&quot;: &quot;墓碑۩(主情景)黑名单版&quot;,</span><br><span class="line">        &quot;description&quot;: &quot;应用进入后台冻结进程，应用回到前台解冻进程,黑名单为全局变量blackapps&quot;,</span><br><span class="line">        &quot;priority&quot;:1,</span><br><span class="line">        &quot;delay&quot;:1000,</span><br><span class="line">        &quot;condition&quot;: &quot;if(frontPkgChanged)&#123;if(globalVarOf$blackapps.contains(to))&#123;su.exe(\&quot;appops set \&quot; +to + \&quot; WAKE_LOCK default\&quot;);su.exe(\&quot;killCONT `pgrepf \&quot;+ to + \&quot;`\&quot;)&#125;;return true&#125;&quot;,</span><br><span class="line">        &quot;actions&quot;: [</span><br><span class="line">            &quot;if(su.exe(\&quot;find /data/system/name window\&quot;).out==[])&#123;io.write(\&quot;/window\&quot;,\&quot;\&quot;)&#125;&quot;,&quot;if(io.read(su.exe(\&quot;find /data/system/name window\&quot;).out[0]).contains(\&quot;.\&quot;)&amp;&amp;activity.getFrontAppPackage()!=io.read(su.exe(\&quot;find /data/system/name window\&quot;).out[0]) &amp;&amp; !thanos.windowManager.hasVisibleWindows(io.read(su.exe(\&quot;find /data/system/name window\&quot;).out[0])) &amp;&amp;!thanos.getActivityManager().hasTopVisibleActivities(io.read(su.exe(\&quot;find /data/system/name window\&quot;).out[0])))&#123;su.exe(\&quot;appops set \&quot; + io.read(su.exe(\&quot;find /data/system/name window\&quot;).out[0]) + \&quot; WAKE_LOCK ignore\&quot;);su.exe(\&quot;killSTOP `pgrepf \&quot;+ io.read(su.exe(\&quot;find /data/system/name window\&quot;).out[0]) +\&quot;`\&quot;);io.write(\&quot;/window\&quot;,\&quot;\&quot;)&#125;;&quot;,</span><br><span class="line">            &quot;if(globalVarOf$blackapps.contains(from))&#123;if(activity.getFrontAppPackage()!=from &amp;&amp; !thanos.windowManager.hasVisibleWindows(from) &amp;&amp;!thanos.getActivityManager().hasTopVisibleActivities(from))&#123;if(!thanos.getAudioManager().hasAudioFocus(from))&#123;activity.setInactive(from);su.exe(\&quot;appops set \&quot; + from + \&quot; WAKE_LOCK ignore\&quot;);su.exe(\&quot;killSTOP `pgrepf \&quot;+ from +\&quot;`\&quot;)&#125;&#125;else&#123;io.write(\&quot;/window\&quot;,from)&#125;;&#125; ;&quot;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h2 id="3-优化版"><a href="#3-优化版" class="headerlink" title="3. 优化版"></a><i id="优化版"></i>3. 优化版</h2><ul>
<li>注意事项<blockquote>
<ol>
<li>第一次使用，添加 ——&gt; 首次使用，打开后切换一次应用后 关闭 ——&gt; 首次使用</li>
<li>墓碑۩（主情景）<br> 2-1 添加墓碑۩（主情景），单独添加主情景可以满足基本墓碑需求，应用进入后台冻结进程，应用回到前台解冻进程,<br> 2-2 白名单全局变量：whiteApps。</li>
<li>墓碑۩(通知)<br>  3-1 添加墓碑۩(通知)，例如下载类或播放器应用，可实现存在通知忽略墓碑，移除通知自动墓碑。<br>  3-2 全局变量为：noti</li>
</ol>
</blockquote>
</li>
</ul>
<h3 id="3-1-首次使用"><a href="#3-1-首次使用" class="headerlink" title="3-1. 首次使用"></a><i id="首次使用"></i>3-1. 首次使用</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;name&quot;: &quot;首次使用&quot;,</span><br><span class="line">        &quot;description&quot;: &quot;打开之后，切换一次应用，之后关闭&quot;,</span><br><span class="line">        &quot;priority&quot;: 2,</span><br><span class="line">        &quot;condition&quot;: &quot; frontPkgChanged == true  &quot;,</span><br><span class="line">        &quot;actions&quot;: [ </span><br><span class="line">                &quot;if(su.exe(\&quot;find /data/system/name window\&quot;).out==[])&#123;io.write(\&quot;/window\&quot;,\&quot;\&quot;)&#125;&quot;</span><br><span class="line">                ]</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="3-2-墓碑۩-主情景"><a href="#3-2-墓碑۩-主情景" class="headerlink" title="3-2. 墓碑۩(主情景)"></a><i id="墓碑۩(主情景)"></i>3-2. 墓碑۩(主情景)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;name&quot;: &quot;墓碑۩(主情景)&quot;,</span><br><span class="line">        &quot;description&quot;: &quot;应用进入后台冻结进程，应用回到前台解冻进程,黑名单为乖巧名单,白名单为全局变量whiteApps&quot;,</span><br><span class="line">        &quot;priority&quot;:1,</span><br><span class="line">        &quot;delay&quot;:1000,</span><br><span class="line">        &quot;condition&quot;: &quot;if(frontPkgChanged)&#123;if(thanos.getActivityManager().isPkgSmartStandByEnabled(to) &amp;&amp; !globalVarOf$whiteApps.contains(to))&#123;su.exe(\&quot;appops set \&quot; +to + \&quot; WAKE_LOCK default\&quot;);su.exe(\&quot;killCONT `pgrepf \&quot;+ to + \&quot;`\&quot;)&#125;return true&#125;&quot;,</span><br><span class="line">        &quot;actions&quot;: [</span><br><span class="line">            &quot;if(io.read(su.exe(\&quot;find /data/system/name window\&quot;).out[0]).contains(\&quot;.\&quot;)&amp;&amp;activity.getFrontAppPackage()!=io.read(su.exe(\&quot;find /data/system/name window\&quot;).out[0]) &amp;&amp; !thanos.windowManager.hasVisibleWindows(io.read(su.exe(\&quot;find /data/system/name window\&quot;).out[0])) &amp;&amp;!thanos.getActivityManager().hasTopVisibleActivities(io.read(su.exe(\&quot;find /data/system/name window\&quot;).out[0])))&#123;su.exe(\&quot;appops set \&quot; + io.read(su.exe(\&quot;find /data/system/name window\&quot;).out[0]) + \&quot; WAKE_LOCK ignore\&quot;);su.exe(\&quot;killSTOP `pgrepf \&quot;+ io.read(su.exe(\&quot;find /data/system/name window\&quot;).out[0]) +\&quot;`\&quot;);io.write(\&quot;/window\&quot;,\&quot;\&quot;)&#125;;&quot;,</span><br><span class="line">            &quot;if(thanos.getActivityManager().isPkgSmartStandByEnabled(from) &amp;&amp; !globalVarOf$whiteApps.contains(from))&#123;if(activity.getFrontAppPackage()!=from &amp;&amp; !thanos.windowManager.hasVisibleWindows(from) &amp;&amp;!thanos.getActivityManager().hasTopVisibleActivities(from))&#123;if(!thanos.getAudioManager().hasAudioFocus(from))&#123;activity.setInactive(from);su.exe(\&quot;appops set \&quot; + from + \&quot; WAKE_LOCK ignore\&quot;);su.exe(\&quot;killSTOP `pgrepf \&quot;+ from +\&quot;`\&quot;)&#125;&#125;else&#123;io.write(\&quot;/window\&quot;,from)&#125;;&#125; ;&quot;</span><br><span class="line">            ]</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="3-3-墓碑۩-通知"><a href="#3-3-墓碑۩-通知" class="headerlink" title="3-3. 墓碑۩(通知)"></a><i id="墓碑۩(通知)"></i>3-3. 墓碑۩(通知)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    &quot;name&quot;: &quot;墓碑۩(通知)&quot;,</span><br><span class="line">    &quot;description&quot;: &quot;创建全局变量noti,添加应用，应用存在通知则忽略墓碑,移除通知后移动墓碑，&quot;,</span><br><span class="line">    &quot;priority&quot;: 1,</span><br><span class="line">    &quot;condition&quot;: &quot;if(notificationAdded==true&amp;&amp;globalVarOf$noti.contains(pkgName))&#123;if(thanos.getActivityManager().isPkgSmartStandByEnabled(pkgName))&#123;thanos.getActivityManager().setPkgSmartStandByEnabled(pkgName,false)&#125;&#125;;if(notificationRemoved==true&amp;&amp;globalVarOf$noti.contains(pkgName))&#123;if(!thanos.getActivityManager().isPkgSmartStandByEnabled(pkgName))&#123;thanos.getActivityManager().setPkgSmartStandByEnabled(pkgName,true)&#125;;if(activity.getFrontAppPackage()!=pkgName &amp;&amp; !thanos.windowManager.hasVisibleWindows(pkgName) &amp;&amp;!thanos.getActivityManager().hasTopVisibleActivities(pkgName))&#123;activity.setInactive(pkgName);su.exe(\&quot;appops set \&quot; + pkgName + \&quot; WAKE_LOCK ignore\&quot;);su.exe(\&quot;killSTOP `pgrepf \&quot;+ pkgName +\&quot;`\&quot;)&#125;;&#125;&quot;,</span><br><span class="line">    &quot;actions&quot;: [</span><br><span class="line">      &quot;&quot;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>PS：欢迎向我投稿更多实用的情景模式哦，可以在这里告诉我：<a target="_blank" rel="noopener" href="https://www.coolapk.com/feed/45352543?shareKey=MjM5NmVlNTIyN2IxNjQ0MzUwYzM~&shareUid=3571197&shareFrom" title="**`投稿`**"><strong><code>投稿</code></strong></a></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://blog.bzmshang.top">备份:bzmshang.top</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://blog.bzmshang.top/Thanox_SceneModel.html">https://blog.bzmshang.top/Thanox_SceneModel.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.bzmshang.top" target="_blank">冰梦博客的备份</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/Mi-Freeform_Tutorial.html" title="全局小窗软件-米窗"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">全局小窗软件-米窗</div></div></a></div><div class="next-post pull-right"><a href="/Practical_directives.html" title="实用指令"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">实用指令</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">备份:bzmshang.top</div><div class="author-info__description">一切如初，常怀于心。</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">11</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%83%85%E6%99%AF%E6%A8%A1%E5%BC%8F%E7%89%88%E6%9C%AC"><span class="toc-number">1.</span> <span class="toc-text">情景模式版本</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A3%B0%E6%98%8E"><span class="toc-number">1.1.</span> <span class="toc-text">声明</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E7%94%A8%E6%83%85%E6%99%AF%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.</span> <span class="toc-text">实用情景模式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E6%B8%85%E7%90%86%E5%90%8E%E5%8F%B0"><span class="toc-number">2.1.</span> <span class="toc-text">1. 清理后台</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E5%88%92%E5%8D%A1%E5%8D%B3%E6%B8%85"><span class="toc-number">2.1.1.</span> <span class="toc-text">1.1 划卡即清</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E8%87%AA%E5%8A%A8%E5%88%92%E6%8E%89%E6%9C%80%E8%BF%91%E4%BB%BB%E5%8A%A1%E4%B8%AD%E6%B2%A1%E6%9C%89%E8%BF%90%E8%A1%8C%E7%9A%84%E5%BA%94%E7%94%A8"><span class="toc-number">2.1.2.</span> <span class="toc-text">1.2 自动划掉最近任务中没有运行的应用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-%E8%BF%94%E5%9B%9E%E6%A1%8C%E9%9D%A2%E7%A7%BB%E9%99%A4%E4%BB%BB%E5%8A%A1%E5%8D%A1%E7%89%87"><span class="toc-number">2.1.3.</span> <span class="toc-text">1.3 返回桌面移除任务卡片</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-%E6%81%AF%E5%B1%8F%E5%85%B3%E6%95%B0%E6%8D%AE%EF%BC%8C%E6%B8%85%E7%90%86%E5%90%8E%E5%8F%B0"><span class="toc-number">2.1.4.</span> <span class="toc-text">1.4 息屏关数据，清理后台</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-%E8%BF%94%E5%9B%9E%E6%A1%8C%E9%9D%A2%E6%88%96%E7%81%AD%E5%B1%8F%E6%B8%85%E7%90%86%E5%90%8E%E5%8F%B0"><span class="toc-number">2.1.5.</span> <span class="toc-text">1.5 返回桌面或灭屏清理后台</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-6-5%E5%88%86%E9%92%9F%E6%9C%AA%E5%89%8D%E5%8F%B0%E8%87%AA%E5%8A%A8%E6%9D%80%E5%90%8E%E5%8F%B0"><span class="toc-number">2.1.6.</span> <span class="toc-text">1.6 5分钟未前台自动杀后台</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-7-%E7%A7%BB%E9%99%A4%E9%80%9A%E7%9F%A5%E6%9D%80%E5%90%8E%E5%8F%B0"><span class="toc-number">2.1.7.</span> <span class="toc-text">1.7 移除通知杀后台</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-8-%E7%A7%BB%E9%99%A4%E9%80%9A%E7%9F%A5%E6%9D%80%E5%90%8E%E5%8F%B0%E4%BC%98%E5%8C%96%E7%89%88"><span class="toc-number">2.1.8.</span> <span class="toc-text">1.8 移除通知杀后台优化版</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-9-%E5%BA%94%E7%94%A8%E8%A2%AB%E6%9D%80%E6%AD%BB%EF%BC%8C%E5%88%99%E7%A7%BB%E9%99%A4%E5%8D%A1%E7%89%87"><span class="toc-number">2.1.9.</span> <span class="toc-text">1.9 应用被杀死，则移除卡片</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-10-%E5%BC%80%E6%9C%BA%E5%B7%A5%E4%BD%9C"><span class="toc-number">2.1.10.</span> <span class="toc-text">1.10 开机工作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-11-%E6%B8%B8%E6%88%8F%E6%97%B6%E6%B8%85%E7%90%86%E9%83%A8%E5%88%86%E5%90%8E%E5%8F%B0"><span class="toc-number">2.1.11.</span> <span class="toc-text">1.11 游戏时清理部分后台</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-12-%E5%BA%94%E7%94%A8%E8%A2%AB%E6%9D%80%EF%BC%8C%E8%87%AA%E5%8A%A8%E5%A4%8D%E6%B4%BB"><span class="toc-number">2.1.12.</span> <span class="toc-text">1.12 应用被杀，自动复活</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E4%BF%9D%E6%B4%BB"><span class="toc-number">2.2.</span> <span class="toc-text">2. 保活</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E5%BA%94%E7%94%A8%E4%BF%9D%E6%B4%BB-%E6%96%B9%E6%A1%881"><span class="toc-number">2.2.1.</span> <span class="toc-text">2.1 应用保活(方案1)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E5%BA%94%E7%94%A8%E4%BF%9D%E6%B4%BB-%E6%96%B9%E6%A1%882"><span class="toc-number">2.2.2.</span> <span class="toc-text">2.2 应用保活(方案2)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E4%BF%9D%E6%B4%BBAPP"><span class="toc-number">2.2.3.</span> <span class="toc-text">2.3 保活APP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-%E5%BE%AE%E4%BF%A1%E4%BF%9D%E6%B4%BB"><span class="toc-number">2.2.4.</span> <span class="toc-text">2.4 微信保活</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-QQ%E4%BF%9D%E6%B4%BB"><span class="toc-number">2.2.5.</span> <span class="toc-text">2.5 QQ保活</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-%E6%97%A0%E9%9A%9C%E7%A2%8D%E4%BF%9D%E6%B4%BB"><span class="toc-number">2.2.6.</span> <span class="toc-text">2.6 无障碍保活</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-%E4%B8%80%E9%94%AE%E5%90%AF%E5%8A%A8%E5%BE%88%E5%A4%9A%E5%BA%94%E7%94%A8"><span class="toc-number">2.2.7.</span> <span class="toc-text">2.7 一键启动很多应用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%AE%9A%E4%BD%8D"><span class="toc-number">2.3.</span> <span class="toc-text">3. 定位</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E8%87%AA%E5%8A%A8GPS"><span class="toc-number">2.3.1.</span> <span class="toc-text">3.1 自动GPS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E8%87%AA%E5%8A%A8%E5%BC%80%E5%85%B3GPS"><span class="toc-number">2.3.2.</span> <span class="toc-text">3.2 自动开关GPS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E5%BE%AE%E4%BF%A1%E4%BD%8D%E7%BD%AE%E5%85%B1%E4%BA%AB"><span class="toc-number">2.3.3.</span> <span class="toc-text">3.3 微信位置共享</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E6%89%93%E7%9B%B9"><span class="toc-number">2.4.</span> <span class="toc-text">4. 打盹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E6%81%AF-%E4%BA%AE%E5%B1%8F%E8%BF%9B-%E9%80%80%E6%89%93%E7%9B%B9"><span class="toc-number">2.4.1.</span> <span class="toc-text">4.1 息&#x2F;亮屏进&#x2F;退打盹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E6%81%AF-%E4%BA%AE%E5%B1%8F%E8%BF%9B-%E9%80%80%E6%89%93%E7%9B%B9%E8%BF%9B%E9%98%B6"><span class="toc-number">2.4.2.</span> <span class="toc-text">4.2 息&#x2F;亮屏进&#x2F;退打盹进阶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-%E6%B7%B1%E5%BA%A6doze%E5%B9%B6%E5%B1%8F%E8%94%BD%E4%BC%A0%E6%84%9F%E5%99%A8%E5%BB%B6%E8%BF%9F%E7%89%88"><span class="toc-number">2.4.3.</span> <span class="toc-text">4.3 深度doze并屏蔽传感器延迟版</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-%E5%BC%80%E6%9C%BA%E5%85%B3%E9%97%AD%E6%89%93%E7%9B%B9"><span class="toc-number">2.4.4.</span> <span class="toc-text">4.4 开机关闭打盹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-WIFI"><span class="toc-number">2.5.</span> <span class="toc-text">5. WIFI</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-WiFi%E4%B8%8E%E7%A7%BB%E5%8A%A8%E6%95%B0%E6%8D%AE%E7%BD%91%E7%BB%9C%E7%9A%84%E8%87%AA%E5%8A%A8%E5%88%87%E6%8D%A2"><span class="toc-number">2.5.1.</span> <span class="toc-text">5.1 WiFi与移动数据网络的自动切换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-%E8%87%AA%E5%8A%A8%E5%BC%80%E5%85%B3WIFI"><span class="toc-number">2.5.2.</span> <span class="toc-text">5.2 自动开关WIFI</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-%E6%95%B0%E6%8D%AE%E5%92%8Cwifi"><span class="toc-number">2.5.3.</span> <span class="toc-text">5.3 数据和wifi</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-FCM"><span class="toc-number">2.6.</span> <span class="toc-text">6. FCM</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-%E5%A2%93%E7%A2%91%E6%A8%A1%E5%BC%8FFCM%E6%8E%A8%E9%80%81"><span class="toc-number">2.6.1.</span> <span class="toc-text">6.1 墓碑模式FCM推送</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-QW%E4%BC%98%E5%8C%96"><span class="toc-number">2.7.</span> <span class="toc-text">7. QW优化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-%E5%BE%AE%E4%BF%A1FCM%E6%8E%A8%E9%80%81"><span class="toc-number">2.7.1.</span> <span class="toc-text">7.1 微信FCM推送</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-QQ-%E5%BE%AE%E4%BF%A1%E5%90%8E%E5%8F%B0%E4%BC%98%E5%8C%96"><span class="toc-number">2.7.2.</span> <span class="toc-text">7.2 QQ&#x2F;微信后台优化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-QQ%E8%BF%9B%E7%A8%8B%E4%BC%98%E5%8C%96"><span class="toc-number">2.7.3.</span> <span class="toc-text">7.3 QQ进程优化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-4-AutoKill-QQMSF"><span class="toc-number">2.7.4.</span> <span class="toc-text">7.4 AutoKill-QQMSF</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-5-QQ%E8%BF%9B%E7%A8%8B%E4%BC%98%E5%8C%96%E5%8F%8C%E8%BF%9B%E7%A8%8B"><span class="toc-number">2.7.5.</span> <span class="toc-text">7.5 QQ进程优化双进程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-6-QQ%E5%BE%AE%E4%BF%A1%E7%94%B5%E6%B1%A0%E4%BC%98%E5%8C%96%E7%AE%A1%E7%90%86"><span class="toc-number">2.7.6.</span> <span class="toc-text">7.6 QQ微信电池优化管理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E5%85%85%E7%94%B5"><span class="toc-number">2.8.</span> <span class="toc-text">8. 充电</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-%E5%85%85%E7%94%B5%E6%8E%A7%E5%88%B6-%E6%97%A0%E6%95%88"><span class="toc-number">2.8.1.</span> <span class="toc-text">8.1 充电控制(无效)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-%E5%85%85%E7%94%B5%E5%81%9C%E6%AD%A2"><span class="toc-number">2.8.2.</span> <span class="toc-text">8.2. 充电停止</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-NFC-%E8%93%9D%E7%89%99"><span class="toc-number">2.9.</span> <span class="toc-text">9. NFC&#x2F;蓝牙</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-%E8%87%AA%E5%8A%A8%E5%BC%80%E5%85%B3NFC"><span class="toc-number">2.9.1.</span> <span class="toc-text">9.1 自动开关NFC</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-%E8%87%AA%E5%8A%A8%E5%BC%80%E5%85%B3%E8%93%9D%E7%89%99"><span class="toc-number">2.9.2.</span> <span class="toc-text">9.2 自动开关蓝牙</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-%E8%93%9D%E7%89%99%E6%96%AD%E5%BC%80%E8%87%AA%E5%8A%A8%E5%85%B3%E9%97%AD"><span class="toc-number">2.9.3.</span> <span class="toc-text">9.3 蓝牙断开自动关闭</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-%E6%A0%B8%E5%BF%83%E6%8E%A7%E5%88%B6"><span class="toc-number">2.10.</span> <span class="toc-text">10. 核心控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-1-%E4%BA%AE-%E6%81%AF%E5%B1%8F%E5%BC%80%E5%85%B3%E6%A0%B8%E5%BF%83"><span class="toc-number">2.10.1.</span> <span class="toc-text">10.1 亮&#x2F;息屏开关核心</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-2-%E5%90%83%E5%A4%A7%E6%A0%B8%E9%94%81%E5%B0%8F%E6%A0%B8"><span class="toc-number">2.10.2.</span> <span class="toc-text">10.2 吃大核锁小核</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-%E9%80%9A%E7%9F%A5"><span class="toc-number">2.11.</span> <span class="toc-text">11. 通知</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-1-%E5%BC%B9%E5%B9%95%E9%80%9A%E7%9F%A5"><span class="toc-number">2.11.1.</span> <span class="toc-text">11.1 弹幕通知</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-2-%E5%BC%B9%E5%B9%95%E9%80%9A%E7%9F%A5"><span class="toc-number">2.11.2.</span> <span class="toc-text">11.2 弹幕通知</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-Google"><span class="toc-number">2.12.</span> <span class="toc-text">12. Google</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#12-1-%E5%BC%80%E5%90%AF%E8%B0%B7%E6%AD%8C%E7%B3%BB%E8%BD%AF%E4%BB%B6%EF%BC%8C%E8%A7%A3%E5%86%BB%E8%B0%B7%E6%AD%8C%E6%9C%8D%E5%8A%A1%E5%92%8C%E6%A1%86%E6%9E%B6"><span class="toc-number">2.12.1.</span> <span class="toc-text">12.1 开启谷歌系软件，解冻谷歌服务和框架</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-2-%E5%BC%80%E5%90%AF%E8%B0%B7%E6%AD%8C%E7%B3%BB%E8%BD%AF%E4%BB%B6%EF%BC%8C%E8%A7%A3%E5%86%BB%E8%B0%B7%E6%AD%8C%E6%9C%8D%E5%8A%A1%E5%92%8C%E6%A1%86%E6%9E%B6%E8%BF%9B%E9%98%B6%E7%89%88"><span class="toc-number">2.12.2.</span> <span class="toc-text">12.2 开启谷歌系软件，解冻谷歌服务和框架进阶版</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-%E7%94%B5%E6%B1%A0"><span class="toc-number">2.13.</span> <span class="toc-text">13. 电池</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#13-1-%E7%94%B5%E6%B1%A0%E7%99%BD%E5%90%8D%E5%8D%95"><span class="toc-number">2.13.1.</span> <span class="toc-text">13.1 电池白名单</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-%E5%88%B0%E7%82%B9%E6%89%A7%E8%A1%8C"><span class="toc-number">2.14.</span> <span class="toc-text">14. 到点执行</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#14-1-%E5%88%B0%E7%82%B9%E9%87%8D%E5%90%AF"><span class="toc-number">2.14.1.</span> <span class="toc-text">14.1 到点重启</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-2-%E5%88%B0%E7%82%B9%E6%9D%80%E6%AD%BB"><span class="toc-number">2.14.2.</span> <span class="toc-text">14.2 到点杀死</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-%E5%86%BB%E7%BB%93"><span class="toc-number">2.15.</span> <span class="toc-text">15. 冻结</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#15-1-%E6%99%BA%E8%83%BD%E5%86%BB%E7%BB%93"><span class="toc-number">2.15.1.</span> <span class="toc-text">15.1 智能冻结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-%E5%B1%8F%E5%B9%95"><span class="toc-number">2.16.</span> <span class="toc-text">16. 屏幕</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-1-%E5%BC%80%E5%85%B3%E5%B1%8F%E6%97%A5%E5%BF%97"><span class="toc-number">2.17.</span> <span class="toc-text">16.1 开关屏日志</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-%E7%AE%A1%E5%AE%B6%E6%B5%81"><span class="toc-number">2.18.</span> <span class="toc-text">17. 管家流</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#17-1-%E5%A4%9A%E5%90%8E%E5%8F%B0%E7%AE%A1%E5%AE%B6"><span class="toc-number">2.18.1.</span> <span class="toc-text">17.1 多后台管家</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A2%93%E7%A2%91"><span class="toc-number">3.</span> <span class="toc-text">墓碑</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E4%B9%96%E5%B7%A7%E5%90%8D%E5%8D%95%E7%89%88"><span class="toc-number">3.1.</span> <span class="toc-text">1. 乖巧名单版</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-1-%E5%86%BB%E7%BB%93"><span class="toc-number">3.1.1.</span> <span class="toc-text">1-1(1). 冻结</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-2-%E5%86%BB%E7%BB%93-Color%E4%BC%98%E5%8C%96%E7%89%88"><span class="toc-number">3.1.2.</span> <span class="toc-text">1-1(2). 冻结(Color优化版)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E8%A7%A3%E5%86%BB"><span class="toc-number">3.1.3.</span> <span class="toc-text">1-2. 解冻</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E9%BB%91%E5%90%8D%E5%8D%95%E7%89%88"><span class="toc-number">3.2.</span> <span class="toc-text">2. 黑名单版</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1%E5%A2%93%E7%A2%91%DB%A9-%E4%B8%BB%E6%83%85%E6%99%AF-%E9%BB%91%E5%90%8D%E5%8D%95%E7%89%88"><span class="toc-number">3.2.1.</span> <span class="toc-text">2-1墓碑۩(主情景)黑名单版</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E4%BC%98%E5%8C%96%E7%89%88"><span class="toc-number">3.3.</span> <span class="toc-text">3. 优化版</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E9%A6%96%E6%AC%A1%E4%BD%BF%E7%94%A8"><span class="toc-number">3.3.1.</span> <span class="toc-text">3-1. 首次使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E5%A2%93%E7%A2%91%DB%A9-%E4%B8%BB%E6%83%85%E6%99%AF"><span class="toc-number">3.3.2.</span> <span class="toc-text">3-2. 墓碑۩(主情景)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E5%A2%93%E7%A2%91%DB%A9-%E9%80%9A%E7%9F%A5"><span class="toc-number">3.3.3.</span> <span class="toc-text">3-3. 墓碑۩(通知)</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/Noactive-starrhymelodge.html" title="最好用的安卓毕业第三方墓碑-Noactive的完整教程">最好用的安卓毕业第三方墓碑-Noactive的完整教程</a><time datetime="2023-08-21T16:00:00.000Z" title="发表于 2023-08-22 00:00:00">2023-08-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/Mi-Freeform-Branches_Collecting.html" title="米窗分支版收集">米窗分支版收集</a><time datetime="2023-03-26T16:00:00.000Z" title="发表于 2023-03-27 00:00:00">2023-03-27</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/MiPush-Framework_User-Guide.html" title="MiPush Framework使用指南">MiPush Framework使用指南</a><time datetime="2023-02-02T16:00:00.000Z" title="发表于 2023-02-03 00:00:00">2023-02-03</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/DataBackup_Cloud.html" title="数据备份-云端备份">数据备份-云端备份</a><time datetime="2023-01-28T16:00:00.000Z" title="发表于 2023-01-29 00:00:00">2023-01-29</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/Mi-Freeform_Tutorial.html" title="全局小窗软件-米窗">全局小窗软件-米窗</a><time datetime="2022-11-23T16:00:00.000Z" title="发表于 2022-11-24 00:00:00">2022-11-24</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By 备份:bzmshang.top</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>